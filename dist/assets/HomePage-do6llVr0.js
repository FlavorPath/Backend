var Ga=Object.defineProperty;var _a=(t,e,r)=>e in t?Ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var st=(t,e,r)=>_a(t,typeof e!="symbol"?e+"":e,r);import{r as p,n as le,j as ue,R as qa,c as Kt,a as Ua,u as Ka}from"./index-8zlRE-qI.js";import{c as Wa}from"./react-BldeI6aZ.js";import{u as Vi}from"./useQuery-DXe8zmVD.js";import{A as Bi}from"./api-path-DnyBEyJv.js";import{a as $i}from"./index-DTlkZk8a.js";import{T as Xn}from"./Toast-CHgZMa8f.js";import{R as Za}from"./Restaurant-C9KYn1dJ.js";import{S as Ja}from"./SearchInput-C0YH8Oed.js";import{B as Xa}from"./Button-B76DXv8C.js";import"./index-Cc4pVggC.js";import"./auth.store-C-PIHe4R.js";import"./useSelectedRestaurant.hook-CNadJqmH.js";import"./restaurant.query-DLrNq_Bs.js";import"./Icon-DN8LPNFT.js";import"./index-DqL8lkA2.js";import"./float-GDraHBfA.js";const Nr=Wa(t=>({isOpen:!1,setOpenBottomSheet:e=>t({isOpen:e})})),Ze=typeof window<"u"&&typeof document<"u"?p.useLayoutEffect:p.useEffect,re=(t,e,r)=>{Ze(()=>{if(!t||!r)return;const n=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return a===void 0?r(t):r(t,...a)};return kakao.maps.event.addListener(t,e,n),()=>{kakao.maps.event.removeListener(t,e,n)}},[t,e,r])},Hi="__react-kakao-maps-sdk__";let Ct=function(t){return t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE",t}({});const Ya=`${Hi}_Loader`,ee=class ee{constructor(e){st(this,"callbacks",[]);st(this,"done",!1);st(this,"loading",!1);st(this,"errors",[]);let{appkey:r,id:n=Ya,libraries:i=[],nonce:a,retries:o=3,url:s="//dapi.kakao.com/v2/maps/sdk.js"}=e;if(this.id=n,this.appkey=r,this.libraries=i,this.nonce=a,this.retries=o,this.url=s,ee.instance&&!ee.equalOptions(this.options,ee.instance.options)&&!ee.equalOptions(this.options,ee.instance.options))switch(ee.instance.status){case Ct.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(ee.instance.options,null,2)}`);default:ee.instance.reset(),ee.instance=this;break}return ee.instance||(ee.instance=this),ee.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(e){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(e),ee.loadEventCallback.add(e),e}static removeLoadEventLisnter(e){return ee.loadEventCallback.delete(e)}load(){return new Promise((e,r)=>{this.loadCallback(n=>{n?r(n):e(window.kakao)})})}get status(){return this.onEvent?Ct.FAILURE:this.done?Ct.SUCCESS:this.loading?Ct.LOADING:Ct.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(e){this.callbacks.push(e),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const e=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=e,r.onerror=this.loadErrorCallback.bind(this),r.onload=this.callback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const r=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(r=>{r(this.onEvent)}),this.callbacks=[],ee.loadEventCallback.forEach(r=>{r(this.onEvent)})}createUrl(){let e=this.url;return e+=`?appkey=${this.appkey}`,this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),e+="&autoload=false",e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}callback(){kakao.maps.load(()=>{ee.instance.done=!0,ee.instance.loading=!1,ee.instance.callbacks.forEach(e=>{e(ee.instance.onEvent)}),ee.instance.callbacks=[],ee.loadEventCallback.forEach(e=>{e(ee.instance.onEvent)})})}static equalOptions(e,r){if(e.appkey!==r.appkey||e.id!==r.id||e.libraries.length!==r.libraries.length)return!1;for(let n=0;n<e.libraries.length;++n)if(e.libraries[n]!==r.libraries[n])return!1;return!(e.nonce!==r.nonce||e.retries!==r.retries||e.url!==r.url)}};st(ee,"loadEventCallback",new Set);let Wt=ee;const H=function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];Ze(()=>{!t||n.every(a=>typeof a>"u")||t[e].call(t,...n)},[t,e,...n])},Gi=le.createContext(void 0),Qa=le.forwardRef(function(e,r){let{id:n,as:i,children:a,center:o,isPanto:s=!1,padding:c=32,disableDoubleClick:u,disableDoubleClickZoom:f,draggable:l,zoomable:d,keyboardShortcuts:h,level:g,maxLevel:m,minLevel:k,mapTypeId:w,projectionId:b,scrollwheel:S,tileAnimation:A,onBoundsChanged:R,onCenterChanged:y,onClick:v,onDoubleClick:E,onDrag:T,onDragEnd:P,onDragStart:O,onIdle:D,onMaptypeidChanged:F,onMouseMove:_,onRightClick:J,onTileLoaded:be,onZoomChanged:ne,onZoomStart:W,onCreate:X,...ce}=e;const ie=i||"div",[$,Me]=p.useState(!1),[N,ke]=p.useState(),et=p.useRef(null);return Ze(()=>{const ve=Wt.addLoadEventLisnter(Ee=>Me(!Ee));return()=>{Wt.removeLoadEventLisnter(ve)}},[]),Ze(()=>{if(!$)return;const ve=et.current;if(!ve)return;const Ee="lat"in o?new kakao.maps.LatLng(o.lat,o.lng):new kakao.maps.Coords(o.x,o.y),er=new kakao.maps.Map(ve,{center:Ee,disableDoubleClick:u,disableDoubleClickZoom:f,draggable:l,keyboardShortcuts:h,level:g,mapTypeId:typeof w=="string"?kakao.maps.MapTypeId[w]:w,projectionId:b,scrollwheel:S,tileAnimation:A});return ke(er),()=>{ve.innerHTML=""}},[$,u,f,A]),p.useImperativeHandle(r,()=>N,[N]),Ze(()=>{!N||!X||X(N)},[N,X]),Ze(()=>{if(!N)return;let ve=N.getCenter();ve instanceof kakao.maps.Coords&&(ve=ve.toLatLng());const Ee="lat"in o?new kakao.maps.LatLng(o.lat,o.lng):new kakao.maps.Coords(o.x,o.y);Ee instanceof kakao.maps.LatLng&&Ee.equals(ve)||Ee instanceof kakao.maps.Coords&&Ee.toLatLng().equals(ve)||(s?N.panTo(Ee,c):N.setCenter(Ee))},[N,o.lat,o.lng,o.x,o.y]),H(N,"setDraggable",l),H(N,"setZoomable",d),H(N,"setKeyboardShortcuts",h),H(N,"setLevel",g),H(N,"setMapTypeId",$?typeof w=="string"?kakao.maps.MapTypeId[w]:w:void 0),H(N,"setProjectionId",b),H(N,"setMinLevel",m),H(N,"setMaxLevel",k),re(N,"bounds_changed",R),re(N,"center_changed",y),re(N,"click",v),re(N,"dblclick",E),re(N,"drag",T),re(N,"dragstart",O),re(N,"dragend",P),re(N,"idle",D),re(N,"maptypeid_changed",F),re(N,"mousemove",_),re(N,"rightclick",J),re(N,"tilesloaded",be),re(N,"zoom_changed",ne),re(N,"zoom_start",W),ue.jsxs(ue.Fragment,{children:[ue.jsx(ie,{id:n||`${Hi}_Map`,...ce,ref:et}),N&&ue.jsx(Gi.Provider,{value:N,children:a})]})}),_i=t=>{const e=p.useContext(Gi);if(!e)throw new Error(`${t?t+" Component":"useMap"} must exist inside Map Component!`);return e},eo=le.forwardRef(function(e,r){let{map:n,position:i,marker:a,children:o,altitude:s,disableAutoPan:c,range:u,removable:f,zIndex:l,onCreate:d}=e;const h=p.useMemo(()=>{const m=document.createElement("div");return m.style.display="none",new kakao.maps.InfoWindow({altitude:s,disableAutoPan:c,range:u,removable:f,zIndex:l,content:m,position:i})},[c,f]),g=p.useMemo(()=>h.getContent(),[h]);return p.useImperativeHandle(r,()=>h,[h]),p.useLayoutEffect(()=>(h.open(n,a),()=>{h.close()}),[n,a]),p.useLayoutEffect(()=>{d&&d(h)},[h,d]),H(h,"setPosition",i),H(h,"setAltitude",s),H(h,"setRange",u),H(h,"setZIndex",l),qa.createPortal(o,g.parentElement??g)}),Cn=le.createContext(void 0),to=le.forwardRef(function(e,r){let{onClusterclick:n,onClusterdblclick:i,onClustered:a,onClusterout:o,onClusterover:s,onClusterrightclick:c,onCreate:u,...f}=e;const{children:l,averageCenter:d,calculator:h,clickable:g,disableClickZoom:m,gridSize:k,hoverable:w,minClusterSize:b,minLevel:S,styles:A,texts:R}=f,y=_i("MarkerClusterer"),v=p.useMemo(()=>{if(!window.kakao.maps.MarkerClusterer){console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`");return}return new kakao.maps.MarkerClusterer({averageCenter:d,calculator:h,clickable:g,disableClickZoom:m,gridSize:k,hoverable:w,minClusterSize:b,minLevel:S,styles:A,texts:R})},[]);return p.useImperativeHandle(r,()=>v,[v]),p.useLayoutEffect(()=>{if(v)return v.setMap(y),()=>{v.setMap(null)}},[y,v]),p.useLayoutEffect(()=>{v&&u&&u(v)},[v,u]),H(v,"setGridSize",k),H(v,"setMinClusterSize",b),H(v,"setAverageCenter",d),H(v,"setAverageCenter",d),H(v,"setMinLevel",S),H(v,"setTexts",R),H(v,"setCalculator",h),H(v,"setStyles",A),re(v,"clustered",a),re(v,"clusterclick",n),re(v,"clusterover",s),re(v,"clusterout",o),re(v,"clusterdblclick",i),re(v,"clusterrightclick",c),v?ue.jsxs(Cn.Provider,{value:v,children:[l,ue.jsx(ro,{...f})]}):null}),ro=()=>{const t=p.useContext(Cn);return Ze(()=>{t.redraw()}),null},no=le.forwardRef(function(e,r){let{map:n,position:i,children:a,altitude:o,clickable:s,draggable:c,image:u,infoWindowOptions:f,onCreate:l,onClick:d,onDragEnd:h,onDragStart:g,onMouseOut:m,onMouseOver:k,opacity:w,range:b,title:S,zIndex:A}=e;const R=p.useContext(Cn),y=p.useMemo(()=>{var E,T,P,O,D,F,_,J,be,ne,W,X;return u&&new kakao.maps.MarkerImage(u.src,new kakao.maps.Size(u.size.width,u.size.height),{alt:(E=u.options)==null?void 0:E.alt,coords:(T=u.options)==null?void 0:T.coords,offset:((P=u.options)==null?void 0:P.offset)&&new kakao.maps.Point((O=u.options)==null?void 0:O.offset.x,(D=u.options)==null?void 0:D.offset.y),shape:(F=u.options)==null?void 0:F.shape,spriteOrigin:((_=u.options)==null?void 0:_.spriteOrigin)&&new kakao.maps.Point((J=u.options)==null?void 0:J.spriteOrigin.x,(be=u.options)==null?void 0:be.spriteOrigin.y),spriteSize:((ne=u.options)==null?void 0:ne.spriteSize)&&new kakao.maps.Size((W=u.options)==null?void 0:W.spriteSize.width,(X=u.options)==null?void 0:X.spriteSize.height)})},[JSON.stringify(u)]),v=p.useMemo(()=>new kakao.maps.Marker({altitude:o,clickable:s,draggable:c,image:y,opacity:w,range:b,title:S,zIndex:A,position:i}),[]);return p.useImperativeHandle(r,()=>v,[v]),p.useLayoutEffect(()=>R?(R.addMarker(v,!0),()=>R.removeMarker(v,!0)):(v.setMap(n),()=>v.setMap(null)),[n,R,v]),p.useLayoutEffect(()=>{l&&l(v)},[v,l]),H(v,"setPosition",i),H(v,"setImage",y),H(v,"setAltitude",o),H(v,"setClickable",s),H(v,"setDraggable",c),H(v,"setOpacity",w),H(v,"setRange",b),H(v,"setRange",b),H(v,"setTitle",S),H(v,"setTitle",S),H(v,"setZIndex",A),re(v,"click",d),re(v,"dragstart",g),re(v,"dragend",h),re(v,"mouseout",m),re(v,"mouseover",k),a?ue.jsx(eo,{position:i,map:n,marker:v,altitude:f==null?void 0:f.altitude,disableAutoPan:f==null?void 0:f.disableAutoPan,range:f==null?void 0:f.range,removable:f==null?void 0:f.removable,zIndex:f==null?void 0:f.zIndex,children:a}):null}),io=le.forwardRef(function(e,r){let{position:n,...i}=e;const a=_i("MapMarker"),o=p.useMemo(()=>"lat"in n?new kakao.maps.LatLng(n.lat,n.lng):new kakao.maps.Coords(n.x,n.y).toLatLng(),[n.lat,n.lng,n.x,n.y]);return ue.jsx(no,{map:a,position:o,...i,ref:r})}),ao=t=>{const[e,r]=p.useState([!0,void 0]);return p.useEffect(()=>{new Wt({...t}).load().then(()=>r([!1,void 0])).catch(n=>{r([!1,n])})},[JSON.stringify(t)]),e};function oo(){ao({appkey:"1f8cfa1759e25767a608db780e6d5839",libraries:["clusterer","drawing","services"]})}const so="/assets/KoreanFood-Ba48R3jj.svg",uo="/assets/JapaneseFood-C82pccVy.svg",co="/assets/ChineseFood-C-J14jPP.svg",fo="/assets/WesternFood-BXh1Xtys.svg",lo="/assets/Dessert-lxbqizAw.svg",ho={한식:so,일식:uo,디저트:lo,중식:co,양식:fo},vo=({location:t,name:e,labels:r,onMarkerClick:n})=>{const i=Nr(c=>c.setOpenBottomSheet),a=()=>{i(!0),n(t.latitude,t.longitude),console.log(r)},o=r[0].split(","),s=ho[o[0]];return ue.jsx(io,{position:{lat:t.latitude,lng:t.longitude},image:{src:s,size:{width:34,height:43}},title:e,onClick:a})},po=()=>{const t=()=>({width:`${window.innerWidth}px`,height:`${window.innerHeight-60}px`}),[e,r]=p.useState(t);return p.useEffect(()=>{const n=()=>{r(t())};let i;const a=()=>{i&&cancelAnimationFrame(i),i=requestAnimationFrame(n)};return n(),window.addEventListener("resize",a),()=>{i&&cancelAnimationFrame(i),window.removeEventListener("resize",a)}},[]),e},yo=async()=>{const t=Bi.marker;return(await $i.get(t)).data},go=async t=>{const e=`${Bi.marker}/label?label=${t}`;return(await $i.get(e)).data},mo=()=>Vi({queryKey:["markers"],queryFn:()=>yo()}),bo=t=>Vi({queryKey:["markers",t],queryFn:()=>go(t)}),wo=t=>{const e=t??"",{data:r,isLoading:n,isError:i}=mo(),{data:a,isLoading:o,isError:s,isPending:c}=bo(e);return{HoleMarkers:r,LoadingHole:n,HoleError:i,filteredMarkers:a,isLoading:o,isError:s,isPending:c}};function So({setRestarauntId:t,activeLabel:e}){oo();const r=po(),[n,i]=p.useState(null),{HoleMarkers:a,LoadingHole:o,HoleError:s,filteredMarkers:c,isLoading:u,isError:f}=wo(e),l=async(h,g,m)=>{const k=h-.001;n&&n.setCenter(new window.kakao.maps.LatLng(k,g)),t(m)};if(o||u)return ue.jsx(Xn,{message:"로딩중",variant:"info"});if(s||f)return ue.jsx(Xn,{message:"에러발생"});const d=e?c:a;return ue.jsx(Qa,{id:"map",center:{lat:37.5665,lng:126.978},style:r,level:3,onCreate:h=>i(h),className:Kt({position:"fixed",left:0}),children:ue.jsx(to,{averageCenter:!0,minLevel:7,children:d&&d.map((h,g)=>ue.jsx(vo,{location:{latitude:h.location.latitude,longitude:h.location.longitude},id:h.id,name:h.name,labels:h.labels,onMarkerClick:()=>l(h.location.latitude,h.location.longitude,h.id)},g))})})}const xo=[{label:"한식",value:"한식"},{label:"일식",value:"일식"},{label:"중식",value:"중식"},{label:"양식",value:"양식"},{label:"디저트",value:"디저트"}],Eo=({activeLabel:t,setActiveLabel:e})=>ue.jsx("div",{className:Kt({display:"flex",justifyContent:"center",gap:"10px",marginTop:"75px",position:"fixed",zIndex:900,marginLeft:"30px"}),children:xo.map(r=>ue.jsx(Xa,{variant:t===r.value?"filled":"outlined",className:Kt({width:"55px",height:"24px",borderRadius:12,fontWeight:"medium"}),onClick:()=>e(t===r.value?"":r.value),children:r.label},r.value))});var ko=Oo()?p.useLayoutEffect:p.useEffect;function Oo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function To(){var t=p.useState(Object.create(null)),e=t[1];return p.useCallback(function(){e(Object.create(null))},[])}var Co=function(e){var r=e.children,n=e.type,i=n===void 0?"reach-portal":n,a=p.useRef(null),o=p.useRef(null),s=To();return ko(function(){if(a.current){var c=a.current.ownerDocument;return o.current=c==null?void 0:c.createElement(i),c.body.appendChild(o.current),s(),function(){o.current&&o.current.ownerDocument&&o.current.ownerDocument.body.removeChild(o.current)}}},[i,s]),o.current?Ua.createPortal(r,o.current):p.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var C=function(){return C=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},C.apply(this,arguments)};function Rn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function z(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function te(t,e,r){if(arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var Z;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Z||(Z={}));var mt;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(mt||(mt={}));var fn=Z.Start,An=Z.Stop,Yt=Z.Raise,Ur=Z.Send,qi=Z.Cancel,Ro=Z.NullEvent,Pn=Z.Assign;Z.After;Z.DoneState;var Ui=Z.Log,Ao=Z.Init,ln=Z.Invoke;Z.ErrorExecution;var Yn=Z.ErrorPlatform,Po=Z.ErrorCustom,Ki=Z.Update,Do=Z.Choose,Io=Z.Pure,Wi=".",Qn={},dn="xstate.guard",No="",cr;function Dn(t,e,r){r===void 0&&(r=Wi);var n=zt(t,r),i=zt(e,r);return K(i)?K(n)?i===n:!1:K(n)?n in i:Object.keys(n).every(function(a){return a in i?Dn(n[a],i[a]):!1})}function Zi(t){try{return K(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function hn(t,e){try{return St(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function Lo(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function zt(t,e){if(Lo(t))return t.value;if(St(t))return Lr(t);if(typeof t!="string")return t;var r=hn(t,e);return Lr(r)}function Lr(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function Nt(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var a=n[i];r[a]=e(t[a],a,t,i)}return r}function ei(t,e,r){var n,i,a={};try{for(var o=z(Object.keys(t)),s=o.next();!s.done;s=o.next()){var c=s.value,u=t[c];r(u)&&(a[c]=e(u,c,t))}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}var jo=function(t){return function(e){var r,n,i=e;try{for(var a=z(t),o=a.next();!o.done;o=a.next()){var s=o.value;i=i[s]}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}};function Mo(t,e){return function(r){var n,i,a=r;try{for(var o=z(t),s=o.next();!s.done;s=o.next()){var c=s.value;a=a[e][c]}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}}function Tr(t){if(!t)return[[]];if(K(t))return[[t]];var e=se(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:Tr(t[r]).map(function(i){return[r].concat(i)})}));return e}function se(t){var e;return(e=[]).concat.apply(e,te([],B(t),!1))}function Ji(t){return St(t)?t:[t]}function De(t){return t===void 0?[]:Ji(t)}function jr(t,e,r){var n,i;if(G(t))return t(e,r.data);var a={};try{for(var o=z(Object.keys(t)),s=o.next();!s.done;s=o.next()){var c=s.value,u=t[c];G(u)?a[c]=u(e,r.data):a[c]=u}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function zo(t){return/^(done|error)\./.test(t)}function ti(t){return!!(t instanceof Promise||t!==null&&(G(t)||typeof t=="object")&&G(t.then))}function Fo(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Vo(t,e){var r,n,i=B([[],[]],2),a=i[0],o=i[1];try{for(var s=z(t),c=s.next();!c.done;c=s.next()){var u=c.value;e(u)?a.push(u):o.push(u)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[a,o]}function Xi(t,e){return Nt(t.states,function(r,n){if(r){var i=(K(e)?void 0:e[n])||(r?r.current:void 0);if(i)return{current:i,states:Xi(r,i)}}})}function Bo(t,e){return{current:e,states:Xi(t,e)}}function ri(t,e,r,n){var i=t&&r.reduce(function(a,o){var s,c,u=o.assignment,f={state:n,action:o,_event:e},l={};if(G(u))l=u(a,e.data,f);else try{for(var d=z(Object.keys(u)),h=d.next();!h.done;h=d.next()){var g=h.value,m=u[g];l[g]=G(m)?m(a,e.data,f):m}}catch(k){s={error:k}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(s)throw s.error}}return Object.assign({},a,l)},t);return i}var $o=function(){};function St(t){return Array.isArray(t)}function G(t){return typeof t=="function"}function K(t){return typeof t=="string"}function Yi(t,e){if(t)return K(t)?{type:dn,name:t,predicate:e?e[t]:void 0}:G(t)?{type:dn,name:t.name,predicate:t}:t}function Ho(t){try{return"subscribe"in t&&G(t.subscribe)}catch{return!1}}var He=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();cr={},cr[He]=function(){return this},cr[Symbol.observable]=function(){return this};function bt(t){return!!t&&"__xstatenode"in t}function Go(t){return!!t&&typeof t.send=="function"}function Kr(t,e){return K(t)||typeof t=="number"?C({type:t},e):t}function ye(t,e){if(!K(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=Kr(t);return C({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function ut(t,e){var r=Ji(e).map(function(n){return typeof n>"u"||typeof n=="string"||bt(n)?{target:n,event:t}:C(C({},n),{event:t})});return r}function _o(t){if(!(t===void 0||t===No))return De(t)}function Qi(t,e,r,n,i){var a=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===dn)return((a==null?void 0:a[e.name])||e.predicate)(r,n.data,o);var s=a==null?void 0:a[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(r,n.data,o)}function ea(t){return typeof t=="string"?{type:t}:t}function Cr(t,e,r){var n=function(){},i=typeof t=="object",a=i?t:null;return{next:((i?t.next:t)||n).bind(a),error:((i?t.error:e)||n).bind(a),complete:((i?t.complete:r)||n).bind(a)}}function fr(t,e){return"".concat(t,":invocation[").concat(e,"]")}function vn(t){return(t.type===Yt||t.type===Ur&&t.to===mt.Internal)&&typeof t.delay!="number"}var pt=ye({type:Ao});function pn(t,e){return e&&e[t]||void 0}function Zt(t,e){var r;if(K(t)||typeof t=="number"){var n=pn(t,e);G(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(G(t))r={type:t.name||t.toString(),exec:t};else{var n=pn(t.type,e);if(G(n))r=C(C({},t),{exec:n});else if(n){var i=n.type||t.type;r=C(C(C({},n),t),{type:i})}else r=t}return r}var Ge=function(t,e){if(!t)return[];var r=St(t)?t:[t];return r.map(function(n){return Zt(n,e)})};function In(t){var e=Zt(t);return C(C({id:K(t)?t:e.id},e),{type:e.type})}function qo(t,e){return{type:Yt,event:typeof t=="function"?t:Kr(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function Uo(t,e,r,n){var i={_event:r},a=ye(G(t.event)?t.event(e,r.data,i):t.event),o;if(K(t.delay)){var s=n&&n[t.delay];o=G(s)?s(e,r.data,i):s}else o=G(t.delay)?t.delay(e,r.data,i):t.delay;return C(C({},t),{type:Yt,_event:a,delay:o})}function Ko(t,e){return{to:e?e.to:void 0,type:Ur,event:G(t)?t:Kr(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:G(t)?t.name:Zi(t)}}function Wo(t,e,r,n){var i={_event:r},a=ye(G(t.event)?t.event(e,r.data,i):t.event),o;if(K(t.delay)){var s=n&&n[t.delay];o=G(s)?s(e,r.data,i):s}else o=G(t.delay)?t.delay(e,r.data,i):t.delay;var c=G(t.to)?t.to(e,r.data,i):t.to;return C(C({},t),{to:c,_event:a,event:a.data,delay:o})}var Zo=function(t,e,r){return C(C({},t),{value:K(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},Jo=function(t){return{type:qi,sendId:t}};function Xo(t){var e=In(t);return{type:Z.Start,activity:e,exec:void 0}}function Yo(t){var e=G(t)?t:In(t);return{type:Z.Stop,activity:e,exec:void 0}}function Qo(t,e,r){var n=G(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,a={type:Z.Stop,activity:i};return a}var es=function(t){return{type:Pn,assignment:t}};function ts(t,e){var r=e?"#".concat(e):"";return"".concat(Z.After,"(").concat(t,")").concat(r)}function lr(t,e){var r="".concat(Z.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Rr(t,e){var r="".concat(Z.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Lt(t,e){var r="".concat(Z.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}var rs=function(t){var e,r,n=[];try{for(var i=z(t),a=i.next();!a.done;a=i.next())for(var o=a.value,s=0;s<o.actions.length;){if(o.actions[s].type===Pn){n.push(o.actions[s]),o.actions.splice(s,1);continue}s++}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n};function Mr(t,e,r,n,i,a,o){o===void 0&&(o=!1);var s=o?[]:rs(i),c=s.length?ri(r,n,s,e):r,u=o?[r]:void 0,f=[];function l(g,m){var k;switch(m.type){case Yt:{var w=Uo(m,c,n,t.options.delays);return a&&typeof w.delay=="number"&&a(w,c,n),w}case Ur:var b=Wo(m,c,n,t.options.delays);return a&&b.to!==mt.Internal&&(g==="entry"?f.push(b):a(b,c,n)),b;case Ui:{var S=Zo(m,c,n);return a==null||a(S,c,n),S}case Do:{var A=m,R=(k=A.conds.find(function(be){var ne=Yi(be.cond,t.options.guards);return!ne||Qi(t,ne,c,n,a?void 0:e)}))===null||k===void 0?void 0:k.actions;if(!R)return[];var y=B(Mr(t,e,c,n,[{type:g,actions:Ge(De(R),t.options.actions)}],a,o),2),v=y[0],E=y[1];return c=E,u==null||u.push(c),v}case Io:{var R=m.get(c,n.data);if(!R)return[];var T=B(Mr(t,e,c,n,[{type:g,actions:Ge(De(R),t.options.actions)}],a,o),2),P=T[0],O=T[1];return c=O,u==null||u.push(c),P}case An:{var S=Qo(m,c,n);return a==null||a(S,r,n),S}case Pn:{c=ri(c,n,[m],a?void 0:e),u==null||u.push(c);break}default:var D=Zt(m,t.options.actions),F=D.exec;if(a)a(D,c,n);else if(F&&u){var _=u.length-1,J=C(C({},D),{exec:function(be){for(var ne=[],W=1;W<arguments.length;W++)ne[W-1]=arguments[W];F.apply(void 0,te([u[_]],B(ne),!1))}});D=J}return D}}function d(g){var m,k,w=[];try{for(var b=z(g.actions),S=b.next();!S.done;S=b.next()){var A=S.value,R=l(g.type,A);R&&(w=w.concat(R))}}catch(y){m={error:y}}finally{try{S&&!S.done&&(k=b.return)&&k.call(b)}finally{if(m)throw m.error}}return f.forEach(function(y){a(y,c,n)}),f.length=0,w}var h=se(i.map(d));return[h,c]}var ht=function(t,e){var r=e(t);return r};function ta(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[He]=function(){return this},e}function ns(t,e,r,n){var i,a=ea(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[a.type],s=t.data?jr(t.data,r,n):void 0,c=o?ra(o,t.id,s):ta(t.id);return c.meta=t,c}function ra(t,e,r){var n=ta(e);if(n.deferred=!0,bt(t)){var i=n.state=ht(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function is(t){try{return typeof t.send=="function"}catch{return!1}}function as(t){return is(t)&&"id"in t}function os(t){var e;return C((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[He]=function(){return this},e),t)}var zr=function(t){return t.type==="atomic"||t.type==="final"};function na(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Jt(t){return na(t).filter(function(e){return e.type!=="history"})}function ia(t){var e=[t];return zr(t)?e:e.concat(se(Jt(t).map(ia)))}function jt(t,e){var r,n,i,a,o,s,c,u,f=new Set(t),l=yn(f),d=new Set(e);try{for(var h=z(d),g=h.next();!g.done;g=h.next())for(var m=g.value,k=m.parent;k&&!d.has(k);)d.add(k),k=k.parent}catch(T){r={error:T}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var w=yn(d);try{for(var b=z(d),S=b.next();!S.done;S=b.next()){var m=S.value;if(m.type==="compound"&&(!w.get(m)||!w.get(m).length))l.get(m)?l.get(m).forEach(function(P){return d.add(P)}):m.initialStateNodes.forEach(function(P){return d.add(P)});else if(m.type==="parallel")try{for(var A=(o=void 0,z(Jt(m))),R=A.next();!R.done;R=A.next()){var y=R.value;d.has(y)||(d.add(y),l.get(y)?l.get(y).forEach(function(P){return d.add(P)}):y.initialStateNodes.forEach(function(P){return d.add(P)}))}}catch(P){o={error:P}}finally{try{R&&!R.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}}}catch(T){i={error:T}}finally{try{S&&!S.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}try{for(var v=z(d),E=v.next();!E.done;E=v.next())for(var m=E.value,k=m.parent;k&&!d.has(k);)d.add(k),k=k.parent}catch(T){c={error:T}}finally{try{E&&!E.done&&(u=v.return)&&u.call(v)}finally{if(c)throw c.error}}return d}function aa(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if(zr(n))return n.key}else return{}}var i={};return r.forEach(function(a){i[a.key]=aa(a,e)}),i}function yn(t){var e,r,n=new Map;try{for(var i=z(t),a=i.next();!a.done;a=i.next()){var o=a.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function ss(t,e){var r=jt([t],e);return aa(t,yn(r))}function Mt(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function us(t){return te([],B(new Set(se(te([],B(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Ar(t,e){return e.type==="compound"?Jt(e).some(function(r){return r.type==="final"&&Mt(t,r)}):e.type==="parallel"?Jt(e).every(function(r){return Ar(t,r)}):!1}function cs(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function ni(t){return new Set(se(t.map(function(e){return e.tags})))}function oa(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(K(t)||K(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return oa(t[i],e[i])})}function fs(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function ls(t,e){var r=t.exec,n=C(C({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var Ce=function(){function t(e){var r=this,n;this.actions=[],this.activities=Qn,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Qn,this.meta=cs(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return us(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var n=pt;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=pt;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),K(e))return[e];var i=Object.keys(e);return i.concat.apply(i,te([],B(i.map(function(a){return n.toStrings(e[a],r).map(function(o){return a+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=Rn(e,["configuration","transitions","tags","machine"]);return C(C({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return Dn(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;$o(!!this.machine);var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),ds={deferEvents:!1},ii=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=C(C({},ds),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),en=new Map,hs=0,Rt={bookId:function(){return"x:".concat(hs++)},register:function(t,e){return en.set(t,e),t},get:function(t){return en.get(t)},free:function(t){en.delete(t)}};function Nn(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function vs(){var t=Nn();if(t&&"__xstate__"in t)return t.__xstate__}function ps(t){if(Nn()){var e=vs();e&&e.register(t)}}function ys(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],a=!1,o=function(){if(!a){for(a=!0;i.length>0;){var u=i.shift();r=t.transition(r,u,c),n.forEach(function(f){return f.next(r)})}a=!1}},s=os({id:e.id,send:function(u){i.push(u),o()},getSnapshot:function(){return r},subscribe:function(u,f,l){var d=Cr(u,f,l);return n.add(d),d.next(r),{unsubscribe:function(){n.delete(d)}}}}),c={parent:e.parent,self:s,id:e.id||"anonymous",observers:n};return r=t.start?t.start(c):r,s}var gs={sync:!1,autoForward:!1},he;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(he||(he={}));var ms=function(){function t(e,r){r===void 0&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=he.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,l){if(St(f))return n.batch(f),n.state;var d=ye(Kr(f,l));if(n.status===he.Stopped)return n.state;if(n.status!==he.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(d.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(d.data)));return n.scheduler.schedule(function(){n.forward(d);var h=n._nextState(d);n.update(h,d)}),n._state},this.sendTo=function(f,l,d){var h=n.parent&&(l===mt.Parent||n.parent.id===l),g=h?n.parent:K(l)?l===mt.Internal?n:n.children.get(l)||Rt.get(l):Go(l)?l:void 0;if(!g){if(!h)throw new Error("Unable to send event to child '".concat(l,"' from service '").concat(n.id,"'."));return}if("machine"in g){if(n.status!==he.Stopped||n.parent!==g||n.state.done){var m=C(C({},f),{name:f.name===Po?"".concat(Lt(n.id)):f.name,origin:n.sessionId});!d&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([g,m]):g.send(m)}}else!d&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([g,f.data]):g.send(f.data)},this._exec=function(f,l,d,h){h===void 0&&(h=n.machine.options.actions);var g=f.exec||pn(f.type,h),m=G(g)?g:g?g.exec:f.exec;if(m)try{return m(l,d.data,n.machine.config.predictableActionArguments?{action:f,_event:d}:{action:f,state:n.state,_event:d})}catch(_){throw n.parent&&n.parent.send({type:"xstate.error",data:_}),_}switch(f.type){case Yt:{var k=f;n.defer(k);break}case Ur:var w=f;if(typeof w.delay=="number"){n.defer(w);return}else w.to?n.sendTo(w._event,w.to,d===pt):n.send(w._event);break;case qi:n.cancel(f.sendId);break;case fn:{if(n.status!==he.Running)return;var b=f.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[b.id||b.type])break;if(b.type===Z.Invoke){var S=ea(b.src),A=n.machine.options.services?n.machine.options.services[S.type]:void 0,R=b.id,y=b.data,v="autoForward"in b?b.autoForward:!!b.forward;if(!A)return;var E=y?jr(y,l,d):void 0;if(typeof A=="string")return;var T=G(A)?A(l,d.data,{data:E,src:S,meta:b.meta}):A;if(!T)return;var P=void 0;bt(T)&&(T=E?T.withContext(E):T,P={autoForward:v}),n.spawn(T,R,P)}else n.spawnActivity(b);break}case An:{n.stopChild(f.activity.id);break}case Ui:var O=f,D=O.label,F=O.value;D?n.logger(D,F):n.logger(F);break}};var i=C(C({},t.defaultOptions),r),a=i.clock,o=i.logger,s=i.parent,c=i.id,u=c!==void 0?c:e.id;this.id=u,this.logger=o,this.clock=a,this.parent=s,this.options=i,this.scheduler=new ii({deferEvents:this.options.deferEvents}),this.sessionId=Rt.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:ht(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var a=z(e.actions),o=a.next();!o.done;o=a.next()){var s=o.value;this.exec(s,e,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,a,o,s,c,u,f,l=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===pt)&&this.options.execute)this.execute(this.state);else for(var d=void 0;d=this._outgoingQueue.shift();)d[0].send(d[1]);if(this.children.forEach(function(T){l.state.children[T.id]=T}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var h=z(this.eventListeners),g=h.next();!g.done;g=h.next()){var m=g.value;m(e.event)}}catch(T){n={error:T}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}try{for(var k=z(this.listeners),w=k.next();!w.done;w=k.next()){var m=w.value;m(e,e.event)}}catch(T){a={error:T}}finally{try{w&&!w.done&&(o=k.return)&&o.call(k)}finally{if(a)throw a.error}}try{for(var b=z(this.contextListeners),S=b.next();!S.done;S=b.next()){var A=S.value;A(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(T){s={error:T}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}if(this.state.done){var R=e.configuration.find(function(T){return T.type==="final"&&T.parent===l.machine}),y=R&&R.doneData?jr(R.doneData,e.context,r):void 0;this._doneEvent=Rr(this.id,y);try{for(var v=z(this.doneListeners),E=v.next();!E.done;E=v.next()){var m=E.value;m(this._doneEvent)}}catch(T){u={error:T}}finally{try{E&&!E.done&&(f=v.return)&&f.call(v)}finally{if(u)throw u.error}}this._stop(),this._stopChildren(),Rt.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===he.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this,a=Cr(e,r,n);this.listeners.add(a.next),this.status!==he.NotStarted&&a.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),a.complete()};return this.status===he.Stopped?a.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(a.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===he.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===he.Running)return this;this.machine._init(),Rt.register(this.sessionId,this),this.initialized=!0,this.status=he.Running;var n=e===void 0?this.initialState:ht(this,function(){return fs(e)?r.machine.resolveState(e):r.machine.resolveState(Ce.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,pt)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){G(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,i,a,o,s,c,u,f;try{for(var l=z(this.listeners),d=l.next();!d.done;d=l.next()){var h=d.value;this.listeners.delete(h)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}try{for(var g=z(this.stopListeners),m=g.next();!m.done;m=g.next()){var h=m.value;h(),this.stopListeners.delete(h)}}catch(v){n={error:v}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}try{for(var k=z(this.contextListeners),w=k.next();!w.done;w=k.next()){var h=w.value;this.contextListeners.delete(h)}}catch(v){a={error:v}}finally{try{w&&!w.done&&(o=k.return)&&o.call(k)}finally{if(a)throw a.error}}try{for(var b=z(this.doneListeners),S=b.next();!S.done;S=b.next()){var h=S.value;this.doneListeners.delete(h)}}catch(v){s={error:v}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}if(!this.initialized)return this;this.initialized=!1,this.status=he.Stopped,this._initialState=void 0;try{for(var A=z(Object.keys(this.delayedEventsMap)),R=A.next();!R.done;R=A.next()){var y=R.value;this.clock.clearTimeout(this.delayedEventsMap[y])}}catch(v){u={error:v}}finally{try{R&&!R.done&&(f=A.return)&&f.call(A)}finally{if(u)throw u.error}}this.scheduler.clear(),this.scheduler=new ii({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n;if(!(!((n=e._state)===null||n===void 0)&&n.done)){var i=ye({type:"xstate.stop"}),a=ht(e,function(){var o=se(te([],B(e.state.configuration),!1).sort(function(l,d){return d.order-l.order}).map(function(l){return Ge(l.onExit,e.machine.options.actions)})),s=B(Mr(e.machine,e.state,e.state.context,i,[{type:"exit",actions:o}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),c=s[0],u=s[1],f=new Ce({value:e.state.value,context:u,_event:i,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:c.filter(function(l){return!vn(l)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return f.changed=!0,f});e.update(a,i),e._stopChildren(),Rt.free(e.sessionId)}}),this},t.prototype.batch=function(e){var r=this;if(!(this.status===he.NotStarted&&this.options.deferEvents)){if(this.status!==he.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,a,o=r.state,s=!1,c=[],u=function(h){var g=ye(h);r.forward(g),o=ht(r,function(){return r.machine.transition(o,g,void 0,n||void 0)}),c.push.apply(c,te([],B(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(m){return ls(m,o)})),!1)),s=s||!!o.changed};try{for(var f=z(e),l=f.next();!l.done;l=f.next()){var d=l.value;u(d)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}o.changed=s,o.actions=c,r.update(o,ye(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=ye(e);if(i.name.indexOf(Yn)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Yn)===0}))throw i.data.data;var a=ht(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var i=z(this.forwardTo),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.children.get(o);if(!s)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));s.send(e)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this,n=this.clock.setTimeout(function(){"to"in e&&e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=n)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);r&&(this.removeChild(e),G(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==he.Running)return ra(e,r);if(ti(e))return this.spawnPromise(Promise.resolve(e),r);if(G(e))return this.spawnCallback(e,r);if(as(e))return this.spawnActor(e,r);if(Ho(e))return this.spawnObservable(e,r);if(bt(e))return this.spawnMachine(e,C(C({},n),{id:r}));if(Fo(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,C(C({},this.options),{parent:this,id:r.id||e.id})),a=C(C({},gs),r);a.sync&&i.onTransition(function(s){n.send(Ki,{state:s,id:i.id})});var o=i;return this.children.set(i.id,o),a.autoForward&&this.forwardTo.add(i.id),i.onDone(function(s){n.removeChild(i.id),n.send(ye(s,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=ys(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,a=!1,o;e.then(function(c){a||(o=c,i.removeChild(r),i.send(ye(Rr(r,c),{origin:r})))},function(c){if(!a){i.removeChild(r);var u=Lt(r,c);try{i.send(ye(u,{origin:r}))}catch{i.devTools&&i.devTools.send(u,i.state),i.machine.strict&&i.stop()}}});var s=(n={id:r,send:function(){},subscribe:function(c,u,f){var l=Cr(c,u,f),d=!1;return e.then(function(h){d||(l.next(h),!d&&l.complete())},function(h){d||l.error(h)}),{unsubscribe:function(){return d=!0}}},stop:function(){a=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[He]=function(){return this},n);return this.children.set(r,s),s},t.prototype.spawnCallback=function(e,r){var n,i=this,a=!1,o=new Set,s=new Set,c,u=function(d){c=d,s.forEach(function(h){return h(d)}),!a&&i.send(ye(d,{origin:r}))},f;try{f=e(u,function(d){o.add(d)})}catch(d){this.send(Lt(r,d))}if(ti(f))return this.spawnPromise(f,r);var l=(n={id:r,send:function(d){return o.forEach(function(h){return h(d)})},subscribe:function(d){var h=Cr(d);return s.add(h.next),{unsubscribe:function(){s.delete(h.next)}}},stop:function(){a=!0,G(f)&&f()},toJSON:function(){return{id:r}},getSnapshot:function(){return c}},n[He]=function(){return this},n);return this.children.set(r,l),l},t.prototype.spawnObservable=function(e,r){var n,i=this,a,o=e.subscribe(function(c){a=c,i.send(ye(c,{origin:r}))},function(c){i.removeChild(r),i.send(ye(Lt(r,c),{origin:r}))},function(){i.removeChild(r),i.send(ye(Rr(r),{origin:r}))}),s=(n={id:r,send:function(){},subscribe:function(c,u,f){return e.subscribe(c,u,f)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:r}}},n[He]=function(){return this},n);return this.children.set(r,s),s},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(r){var n=r(this.state.context,e);this.spawnEffect(e.id,n)}},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[He]=function(){return this},n))},t.prototype.attachDev=function(){var e=Nn();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(C(C({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:C({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}ps(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[He]=function(){return this},t.prototype.getSnapshot=function(){return this.status===he.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=sa,t}();function sa(t,e){var r=new ms(t,e);return r}function bs(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function dr(t){return C(C({type:ln},t),{toJSON:function(){t.onDone,t.onError;var e=Rn(t,["onDone","onError"]);return C(C({},e),{type:ln,src:bs(t.src)})}})}var hr="",gn="#",tn="*",ct={},ft=function(t){return t[0]===gn},ws=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Ss=function(){function t(e,r,n,i){n===void 0&&(n="context"in e?e.context:void 0);var a=this,o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(ws(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Wi),this.id=this.config.id||te([this.machine.key],B(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Nt(this.config.states,function(u,f){var l,d=new t(u,{},void 0,{parent:a,key:f});return Object.assign(a.idMap,C((l={},l[d.id]=d,l),d.idMap)),d}):ct;var s=0;function c(u){var f,l;u.order=s++;try{for(var d=z(na(u)),h=d.next();!h.done;h=d.next()){var g=h.value;c(g)}}catch(m){f={error:m}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(f)throw f.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var f=u.event;return f===hr}):hr in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=De(this.config.entry||this.config.onEntry).map(function(u){return Zt(u)}),this.onExit=De(this.config.exit||this.config.onExit).map(function(u){return Zt(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=De(this.config.invoke).map(function(u,f){var l,d;if(bt(u)){var h=fr(a.id,f);return a.machine.options.services=C((l={},l[h]=u,l),a.machine.options.services),dr({src:h,id:h})}else if(K(u.src)){var h=u.id||fr(a.id,f);return dr(C(C({},u),{id:h,src:u.src}))}else if(bt(u.src)||G(u.src)){var h=u.id||fr(a.id,f);return a.machine.options.services=C((d={},d[h]=u.src,d),a.machine.options.services),dr(C(C({id:h},u),{src:h}))}else{var g=u.src;return dr(C(C({id:fr(a.id,f)},u),{src:g}))}}),this.activities=De(this.config.activities).concat(this.invoke).map(function(u){return In(u)}),this.transition=this.transition.bind(this),this.tags=De(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||ia(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,a=n.activities,o=n.guards,s=n.services,c=n.delays;return new t(this.config,{actions:C(C({},i),e.actions),activities:C(C({},a),e.activities),guards:C(C({},o),e.guards),services:C(C({},s),e.services),delays:C(C({},c),e.delays)},r??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return G(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Nt(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===hr,n=this.transitions.filter(function(i){var a=i.eventType===e;return r?a:a||i.eventType===tn});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(a,o){var s=G(a)?"".concat(e.id,":delay[").concat(o,"]"):a,c=ts(s,e.id);return e.onEntry.push(Ko(c,{delay:a})),e.onExit.push(Jo(c)),c},i=St(r)?r.map(function(a,o){var s=n(a.delay,o);return C(C({},a),{event:s})}):se(Object.keys(r).map(function(a,o){var s=r[a],c=K(s)?{target:s}:s,u=isNaN(+a)?a:+a,f=n(u,o);return De(c).map(function(l){return C(C({},l),{event:f,delay:u})})}));return i.map(function(a){var o=a.delay;return C(C({},e.formatTransition(a)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof Ce?e.value:zt(e,this.delimiter);if(K(i)){var a=this.getStateNode(i).initial;return a!==void 0?this.getStateNodes((r={},r[i]=a,r)):[this,this.states[i]]}var o=Object.keys(i),s=[this];return s.push.apply(s,te([],B(se(o.map(function(c){return n.getStateNode(c).getStateNodes(i[c])}))),!1)),s},t.prototype.handles=function(e){var r=Zi(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof Ce?e:Ce.create(e),n=Array.from(jt([],this.getStateNodes(r.value)));return new Ce(C(C({},r),{value:this.resolve(r.value),configuration:n,done:Ar(n,this),tags:ni(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),a=i.next(r,n);return!a||!a.transitions.length?this.next(r,n):a},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),a=this.getStateNode(i[0]),o=a._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,a,o={};try{for(var s=z(Object.keys(e)),c=s.next();!c.done;c=s.next()){var u=c.value,f=e[u];if(f){var l=this.getStateNode(u),d=l._transition(f,r,n);d&&(o[u]=d)}}}catch(w){i={error:w}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}var h=Object.keys(o).map(function(w){return o[w]}),g=se(h.map(function(w){return w.transitions})),m=h.some(function(w){return w.transitions.length>0});if(!m)return this.next(r,n);var k=se(Object.keys(o).map(function(w){return o[w].configuration}));return{transitions:g,exitSet:se(h.map(function(w){return w.exitSet})),configuration:k,source:r,actions:se(Object.keys(o).map(function(w){return o[w].actions}))}},t.prototype._transition=function(e,r,n){return K(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,ye(r))},t.prototype.next=function(e,r){var n,i,a=this,o=r.name,s=[],c=[],u;try{for(var f=z(this.getCandidates(o)),l=f.next();!l.done;l=f.next()){var d=l.value,h=d.cond,g=d.in,m=e.context,k=g?K(g)&&ft(g)?e.matches(zt(this.getStateNodeById(g).path,this.delimiter)):Dn(zt(g,this.delimiter),jo(this.path.slice(0,-2))(e.value)):!0,w=!1;try{w=!h||Qi(this.machine,h,m,r,e)}catch(A){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(A.message))}if(w&&k){d.target!==void 0&&(c=d.target),s.push.apply(s,te([],B(d.actions),!1)),u=d;break}}}catch(A){n={error:A}}finally{try{l&&!l.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}if(u){if(!c.length)return{transitions:[u],exitSet:[],configuration:e.value?[this]:[],source:e,actions:s};var b=se(c.map(function(A){return a.getRelativeStateNodes(A,e.historyValue)})),S=!!u.internal;return{transitions:[u],exitSet:S?[]:se(c.map(function(A){return a.getPotentiallyReenteringNodes(A)})),configuration:b,source:e,actions:s}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var r=[],n=this,i=e;n&&n!==i;)r.push(n),n=n.parent;return n!==i?[]:(r.push(i),r)},t.prototype.getActions=function(e,r,n,i,a,o,s){var c,u,f,l,d=this,h=o?jt([],this.getStateNodes(o.value)):[],g=new Set;try{for(var m=z(Array.from(e).sort(function(O,D){return O.order-D.order})),k=m.next();!k.done;k=m.next()){var w=k.value;(!Mt(h,w)||Mt(n.exitSet,w)||w.parent&&g.has(w.parent))&&g.add(w)}}catch(O){c={error:O}}finally{try{k&&!k.done&&(u=m.return)&&u.call(m)}finally{if(c)throw c.error}}try{for(var b=z(h),S=b.next();!S.done;S=b.next()){var w=S.value;(!Mt(e,w)||Mt(n.exitSet,w.parent))&&n.exitSet.push(w)}}catch(O){f={error:O}}finally{try{S&&!S.done&&(l=b.return)&&l.call(b)}finally{if(f)throw f.error}}n.exitSet.sort(function(O,D){return D.order-O.order});var A=Array.from(g).sort(function(O,D){return O.order-D.order}),R=new Set(n.exitSet),y=se(A.map(function(O){var D=[];if(O.type!=="final")return D;var F=O.parent;if(!F.parent)return D;D.push(lr(O.id,O.doneData),lr(F.id,O.doneData?jr(O.doneData,i,a):void 0));var _=F.parent;return _.type==="parallel"&&Jt(_).every(function(J){return Ar(n.configuration,J)})&&D.push(lr(_.id)),D})),v=A.map(function(O){var D=O.onEntry,F=O.activities.map(function(_){return Xo(_)});return{type:"entry",actions:Ge(s?te(te([],B(D),!1),B(F),!1):te(te([],B(F),!1),B(D),!1),d.machine.options.actions)}}).concat({type:"state_done",actions:y.map(function(O){return qo(O)})}),E=Array.from(R).map(function(O){return{type:"exit",actions:Ge(te(te([],B(O.onExit),!1),B(O.activities.map(function(D){return Yo(D)})),!1),d.machine.options.actions)}}),T=E.concat({type:"transition",actions:Ge(n.actions,this.machine.options.actions)}).concat(v);if(r){var P=Ge(se(te([],B(e),!1).sort(function(O,D){return D.order-O.order}).map(function(O){return O.onExit})),this.machine.options.actions).filter(function(O){return!vn(O)});return T.concat({type:"stop",actions:P})}return T},t.prototype.transition=function(e,r,n,i){e===void 0&&(e=this.initialState);var a=ye(r),o;if(e instanceof Ce)o=n===void 0?e:this.resolveState(Ce.from(e,n));else{var s=K(e)?this.resolve(Lr(this.getResolvedPath(e))):this.resolve(e),c=n??this.machine.context;o=this.resolveState(Ce.from(s,c))}if(this.strict&&!this.events.includes(a.name)&&!zo(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var u=this._transition(o.value,o,a)||{transitions:[],configuration:[],exitSet:[],source:o,actions:[]},f=jt([],this.getStateNodes(o.value)),l=u.configuration.length?jt(f,u.configuration):f;return u.configuration=te([],B(l),!1),this.resolveTransition(u,o,o.context,i,a)},t.prototype.resolveRaisedTransition=function(e,r,n,i){var a,o=e.actions;return e=this.transition(e,r,void 0,i),e._event=n,e.event=n.data,(a=e.actions).unshift.apply(a,te([],B(o),!1)),e},t.prototype.resolveTransition=function(e,r,n,i,a){var o,s,c,u,f=this;a===void 0&&(a=pt);var l=e.configuration,d=!r||e.transitions.length>0,h=d?e.configuration:r?r.configuration:[],g=Ar(h,this),m=d?ss(this.machine,l):void 0,k=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,w=this.getActions(new Set(h),g,e,n,a,r,i),b=r?C({},r.activities):{};try{for(var S=z(w),A=S.next();!A.done;A=S.next()){var R=A.value;try{for(var y=(c=void 0,z(R.actions)),v=y.next();!v.done;v=y.next()){var E=v.value;E.type===fn?b[E.activity.id||E.activity.type]=E:E.type===An&&(b[E.activity.id||E.activity.type]=!1)}}catch(N){c={error:N}}finally{try{v&&!v.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}}}catch(N){o={error:N}}finally{try{A&&!A.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}var T=B(Mr(this,r,n,a,w,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),P=T[0],O=T[1],D=B(Vo(P,vn),2),F=D[0],_=D[1],J=P.filter(function(N){var ke;return N.type===fn&&((ke=N.activity)===null||ke===void 0?void 0:ke.type)===ln}),be=J.reduce(function(N,ke){return N[ke.activity.id]=ns(ke.activity,f.machine,O,a),N},r?C({},r.children):{}),ne=new Ce({value:m||r.value,context:O,_event:a,_sessionid:r?r._sessionid:null,historyValue:m?k?Bo(k,m):void 0:r?r.historyValue:void 0,history:!m||e.source?r:void 0,actions:m?_:[],activities:m?b:r?r.activities:{},events:[],configuration:h,transitions:e.transitions,children:be,done:g,tags:ni(h),machine:this}),W=n!==O;ne.changed=a.name===Ki||W;var X=ne.history;X&&delete X.history;var ce=!g&&(this._transient||l.some(function(N){return N._transient}));if(!d&&(!ce||a.name===hr))return ne;var ie=ne;if(!g)for(ce&&(ie=this.resolveRaisedTransition(ie,{type:Ro},a,i));F.length;){var $=F.shift();ie=this.resolveRaisedTransition(ie,$._event,a,i)}var Me=ie.changed||(X?!!ie.actions.length||W||typeof X.value!=typeof ie.value||!oa(ie.value,X.value):void 0);return ie.changed=Me,ie.history=X,ie},t.prototype.getStateNode=function(e){if(ft(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=ft(e)?e.slice(gn.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&ft(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=hn(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||ct;switch(this.type){case"parallel":return Nt(this.initialStateValue,function(a,o){return a?n.getStateNode(o).resolve(e[o]||a):ct});case"compound":if(K(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?Nt(e,function(a,o){return a?n.getStateNode(o).resolve(a):ct}):this.initialStateValue||{};default:return e||ct}},t.prototype.getResolvedPath=function(e){if(ft(e)){var r=this.machine.idMap[e.slice(gn.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return hn(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=ei(this.states,function(n){return n.initialStateValue||ct},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=zr(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;K(r.target)?e=ft(r.target)?Lr(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(zr(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var r=Tr(this.initialStateValue);return se(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=B(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var a=this.getStateNode(n);if(a.type==="history")return a.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:ei(this.states,function(r,n){if(!e)return r.historyValue();var i=K(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?se(Tr(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var a=Mo(n.path,"states")(e).current;return K(a)?[n.getStateNode(a)]:se(Tr(a).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=se(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var a=this.states,o=new Set(this.ownEvents);if(a)try{for(var s=z(Object.keys(a)),c=s.next();!c.done;c=s.next()){var u=c.value,f=a[u];if(f.states)try{for(var l=(n=void 0,z(f.events)),d=l.next();!d.done;d=l.next()){var h=d.value;o.add("".concat(h))}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(g){e={error:g}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!K(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var a=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(a);return o}catch(s){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(s.message))}else return r.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var r=this,n=_o(e.target),i="internal"in e?e.internal:n?n.some(function(c){return K(c)&&c[0]===r.delimiter}):!0,a=this.machine.options.guards,o=this.resolveTarget(n),s=C(C({},e),{actions:Ge(De(e.actions)),cond:Yi(e.cond,a),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return C(C({},s),{target:s.target?s.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return s},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var a=this.config.on,o=tn,s=a[o],c=s===void 0?[]:s,u=Rn(a,[typeof o=="symbol"?o:o+""]);i=se(Object.keys(u).map(function(b){var S=ut(b,u[b]);return S}).concat(ut(tn,c)))}var f=this.config.always?ut("",this.config.always):[],l=this.config.onDone?ut(String(lr(this.id)),this.config.onDone):[],d=se(this.invoke.map(function(b){var S=[];return b.onDone&&S.push.apply(S,te([],B(ut(String(Rr(b.id)),b.onDone)),!1)),b.onError&&S.push.apply(S,te([],B(ut(String(Lt(b.id)),b.onError)),!1)),S})),h=this.after,g=se(te(te(te(te([],B(l),!1),B(d),!1),B(i),!1),B(f),!1).map(function(b){return De(b).map(function(S){return n.formatTransition(S)})}));try{for(var m=z(h),k=m.next();!k.done;k=m.next()){var w=k.value;g.push(w)}}catch(b){e={error:b}}finally{try{k&&!k.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}return g},t}();function xs(t,e,r){return r===void 0&&(r=t.context),new Ss(t,e,r)}var Es=es,mn;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(mn||(mn={}));var Ft=p.useLayoutEffect;function ai(t){var e=p.useRef();return e.current||(e.current={v:t()}),e.current.v}var ks=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Os=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ts(t,e){var r,n,i=ks([[],[]],2),a=i[0],o=i[1];try{for(var s=Os(t),c=s.next();!c.done;c=s.next()){var u=c.value;e(u)?a.push(u):o.push(u)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[a,o]}var At=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},oi=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};function si(t,e){var r=t.exec,n=r(e.context,e._event.data,{action:t,state:e,_event:e._event});n()}function Cs(t){var e=p.useRef([]),r=p.useRef([]);Ft(function(){var n=t.subscribe(function(i){var a,o;if(i.actions.length){var s=i.actions.filter(function(l){return typeof l.exec=="function"&&"__effect"in l.exec}),c=At(Ts(s,function(l){return l.exec.__effect===mn.Effect}),2),u=c[0],f=c[1];(a=e.current).push.apply(a,oi([],At(u.map(function(l){return[l,i]})),!1)),(o=r.current).push.apply(o,oi([],At(f.map(function(l){return[l,i]})),!1))}});return function(){n.unsubscribe()}},[]),Ft(function(){for(;r.current.length;){var n=At(r.current.shift(),2),i=n[0],a=n[1];si(i,a)}}),p.useEffect(function(){for(;e.current.length;){var n=At(e.current.shift(),2),i=n[0],a=n[1];si(i,a)}})}var Vt=function(){return Vt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vt.apply(this,arguments)},Rs=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function As(t,e,r){if(typeof t=="object")return t;var n=function(){};return{next:t,error:e||n,complete:r||n}}function Ps(t,e,r){e===void 0&&(e={});var n=ai(function(){return typeof t=="function"?t():t}),i=e.context,a=e.guards,o=e.actions,s=e.activities,c=e.services,u=e.delays,f=e.state,l=Rs(e,["context","guards","actions","activities","services","delays","state"]),d=ai(function(){var h={context:i,guards:a,actions:o,activities:s,services:c,delays:u},g=n.withConfig(h,function(){return Vt(Vt({},n.context),i)});return sa(g,Vt({deferEvents:!0},l))});return Ft(function(){var h;return r&&(h=d.subscribe(As(r))),function(){h==null||h.unsubscribe()}},[r]),Ft(function(){return d.start(f?Ce.create(f):void 0),function(){d.stop()}},[]),Ft(function(){Object.assign(d.machine.options.actions,o),Object.assign(d.machine.options.guards,a),Object.assign(d.machine.options.activities,s),Object.assign(d.machine.options.services,c),Object.assign(d.machine.options.delays,u)},[o,a,s,c,u]),Cs(d),d}var Ds=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function Is(t,e){e===void 0&&(e={});var r=p.useCallback(function(s){var c=s.changed===void 0&&Object.keys(s.children).length;(s.changed||c)&&o(s)},[]),n=Ps(t,e,r),i=Ds(p.useState(function(){var s=n.machine.initialState;return e.state?Ce.create(e.state):s}),2),a=i[0],o=i[1];return[a,n.send,n]}function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fe.apply(null,arguments)}function yt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}const M={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(M.str(t)||M.num(t))return t===e;if(M.obj(t)&&M.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let r;for(r in t)if(!(r in e))return!1;for(r in e)if(t[r]!==e[r])return!1;return M.und(r)?t===e:!0}};function Ns(t,e){return r=>(M.arr(r)?r:Object.keys(r)).reduce((n,i)=>{const a=i;return n[a]=t(a),n},t)}function Ls(){const t=p.useState(!1),e=t[1];return p.useCallback(()=>e(n=>!n),[])}function Ke(t,e){return M.und(t)||M.nul(t)?e:t}function vr(t){return M.und(t)?[]:M.arr(t)?t:[t]}function vt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return M.fun(t)?t(...r):t}function js(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,yt(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function rn(t){const e=js(t);if(M.und(e))return fe({to:e},t);const r=Object.keys(t).reduce((n,i)=>M.und(e[i])?fe({},n,{[i]:t[i]}):n,{});return fe({to:e},r)}function Ms(t,e){return e&&(M.fun(e)?e(t):M.obj(e)&&(e.current=t)),t}class Ie{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const r=this.children.indexOf(e);this.children.splice(r,1),this.children.length===0&&this.detach()}}class bn extends Ie{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Ie&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Ie&&e.removeChild(this))}}class ua extends Ie{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Ie&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Ie&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const r={};for(const n in this.payload){const i=this.payload[n];e&&!(i instanceof Ie)||(r[n]=i instanceof Ie?i[e?"getAnimatedValue":"getValue"]():i)}return r}getAnimatedValue(){return this.getValue(!0)}}let Ln;function zs(t,e){Ln={fn:t,transform:e}}let ca;function Fs(t){ca=t}let fa=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Fr;function Vs(t){Fr=t}let la=()=>Date.now(),Bs=t=>t.current,da;function $s(t){da=t}class Hs extends ua{constructor(e,r){super(),this.update=void 0,this.payload=e.style?fe({},e,{style:da(e.style)}):e,this.update=r,this.attach()}}const Gs=t=>M.fun(t)&&!(t.prototype instanceof le.Component),_s=t=>p.forwardRef((r,n)=>{const i=Ls(),a=p.useRef(!0),o=p.useRef(null),s=p.useRef(null),c=p.useCallback(d=>{const h=o.current,g=()=>{let m=!1;s.current&&(m=Ln.fn(s.current,o.current.getAnimatedValue())),(!s.current||m===!1)&&i()};o.current=new Hs(d,g),h&&h.detach()},[]);p.useEffect(()=>()=>{a.current=!1,o.current&&o.current.detach()},[]),p.useImperativeHandle(n,()=>Bs(s)),c(r);const u=o.current.getValue();u.scrollTop,u.scrollLeft;const f=yt(u,["scrollTop","scrollLeft"]),l=Gs(t)?void 0:d=>s.current=Ms(d,n);return le.createElement(t,fe({},f,{ref:l}))});let Bt=!1;const Je=new Set,ha=()=>{if(!Bt)return!1;let t=la();for(let e of Je){let r=!1;for(let n=0;n<e.configs.length;n++){let i=e.configs[n],a,o;for(let s=0;s<i.animatedValues.length;s++){let c=i.animatedValues[s];if(c.done)continue;let u=i.fromValues[s],f=i.toValues[s],l=c.lastPosition,d=f instanceof Ie,h=Array.isArray(i.initialVelocity)?i.initialVelocity[s]:i.initialVelocity;if(d&&(f=f.getValue()),i.immediate){c.setValue(f),c.done=!0;continue}if(typeof u=="string"||typeof f=="string"){c.setValue(f),c.done=!0;continue}if(i.duration!==void 0)l=u+i.easing((t-c.startTime)/i.duration)*(f-u),a=t>=c.startTime+i.duration;else if(i.decay)l=u+h/(1-.998)*(1-Math.exp(-(1-.998)*(t-c.startTime))),a=Math.abs(c.lastPosition-l)<.1,a&&(f=l);else{o=c.lastTime!==void 0?c.lastTime:t,h=c.lastVelocity!==void 0?c.lastVelocity:i.initialVelocity,t>o+64&&(o=t);let g=Math.floor(t-o);for(let b=0;b<g;++b){let S=-i.tension*(l-f),A=-i.friction*h,R=(S+A)/i.mass;h=h+R*1/1e3,l=l+h*1/1e3}let m=i.clamp&&i.tension!==0?u<f?l>f:l<f:!1,k=Math.abs(h)<=i.precision,w=i.tension!==0?Math.abs(f-l)<=i.precision:!0;a=m||k&&w,c.lastVelocity=h,c.lastTime=t}d&&!i.toValues[s].done&&(a=!1),a?(c.value!==f&&(l=f),c.done=!0):r=!0,c.setValue(l),c.lastPosition=l}e.props.onFrame&&(e.values[i.name]=i.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),r||(Je.delete(e),e.stop(!0))}return Je.size?fa(ha):Bt=!1,Bt},qs=t=>{Je.has(t)||Je.add(t),Bt||(Bt=!0,fa(ha))},Us=t=>{Je.has(t)&&Je.delete(t)};function Vr(t,e,r){if(typeof t=="function")return t;if(Array.isArray(t))return Vr({range:t,output:e,extrapolate:r});if(Fr&&typeof t.output[0]=="string")return Fr(t);const n=t,i=n.output,a=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",s=n.extrapolateRight||n.extrapolate||"extend",c=n.easing||(u=>u);return u=>{const f=Ws(u,a);return Ks(u,a[f],a[f+1],i[f],i[f+1],c,o,s,n.map)}}function Ks(t,e,r,n,i,a,o,s,c){let u=c?c(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>r){if(s==="identity")return u;s==="clamp"&&(u=r)}return n===i?n:e===r?t<=e?n:i:(e===-1/0?u=-u:r===1/0?u=u-e:u=(u-e)/(r-e),u=a(u),n===-1/0?u=-u:i===1/0?u=u+n:u=u*(i-n)+n,u)}function Ws(t,e){for(var r=1;r<e.length-1&&!(e[r]>=t);++r);return r-1}class wt extends bn{constructor(e,r,n,i){super(),this.calc=void 0,this.payload=e instanceof bn&&!(e instanceof wt)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Vr(r,n,i)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,r,n){this.calc=Vr(e,r,n)}interpolate(e,r,n){return new wt(this,e,r,n)}}const lt=(t,e,r)=>t&&new wt(t,e,r),Zs={default:{tension:170,friction:26}};function va(t,e){"update"in t?e.add(t):t.getChildren().forEach(r=>va(r,e))}class wn extends Ie{constructor(e){var r;super(),r=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(n,i){i===void 0&&(i=!0),r.value=n,i&&r.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&va(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,r,n){return new wt(this,e,r,n)}}class Js extends bn{constructor(e){super(),this.payload=e.map(r=>new wn(r))}setValue(e,r){r===void 0&&(r=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((n,i)=>this.payload[i].setValue(n,r)):this.payload.forEach(n=>n.setValue(e,r))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,r){return new wt(this,e,r)}}let Xs=0,Ys=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Xs++}update(e){if(!e)return this;const r=rn(e),n=r.delay,i=n===void 0?0:n,a=r.to,o=yt(r,["delay","to"]);if(M.arr(a)||M.fun(a))this.queue.push(fe({},o,{delay:i,to:a}));else if(a){let s={};Object.entries(a).forEach(c=>{let u=c[0],f=c[1];const l=fe({to:{[u]:f},delay:vt(i,u)},o),d=s[l.delay]&&s[l.delay].to;s[l.delay]=fe({},s[l.delay],l,{to:fe({},d,l.to)})}),this.queue=Object.values(s)}return this.queue=this.queue.sort((s,c)=>s.delay-c.delay),this.diff(o),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(i=>{let a=i.from,o=a===void 0?{}:a,s=i.to,c=s===void 0?{}:s;M.obj(o)&&(this.merged=fe({},o,this.merged)),M.obj(c)&&(this.merged=fe({},this.merged,c))});const r=this.local=++this.guid,n=this.localQueue=this.queue;this.queue=[],n.forEach((i,a)=>{let o=i.delay,s=yt(i,["delay"]);const c=f=>{a===n.length-1&&r===this.guid&&f&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let u=M.arr(s.to)||M.fun(s.to);o?setTimeout(()=>{r===this.guid&&(u?this.runAsync(s,c):this.diff(s).start(c))},o):u?this.runAsync(s,c):this.diff(s).start(c)})}else M.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),qs(this);return this}stop(e){return this.listeners.forEach(r=>r(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&Us(this),this}runAsync(e,r){var n=this;e.delay;let i=yt(e,["delay"]);const a=this.local;let o=Promise.resolve(void 0);if(M.arr(i.to))for(let s=0;s<i.to.length;s++){const c=s,u=fe({},i,rn(i.to[c]));M.arr(u.config)&&(u.config=u.config[c]),o=o.then(()=>{if(a===this.guid)return new Promise(f=>this.diff(u).start(f))})}else if(M.fun(i.to)){let s=0,c;o=o.then(()=>i.to(u=>{const f=fe({},i,rn(u));if(M.arr(f.config)&&(f.config=f.config[s]),s++,a===this.guid)return c=new Promise(l=>this.diff(f).start(l))},function(u){return u===void 0&&(u=!0),n.stop(u)}).then(()=>c))}o.then(r)}diff(e){this.props=fe({},this.props,e);let r=this.props,n=r.from,i=n===void 0?{}:n,a=r.to,o=a===void 0?{}:a,s=r.config,c=s===void 0?{}:s,u=r.reverse,f=r.attach,l=r.reset,d=r.immediate;if(u){var h=[o,i];i=h[0],o=h[1]}this.merged=fe({},i,this.merged,o),this.hasChanged=!1;let g=f&&f(this);if(this.animations=Object.entries(this.merged).reduce((m,k)=>{let w=k[0],b=k[1],S=m[w]||{};const A=M.num(b),R=M.str(b)&&!b.startsWith("#")&&!/\d/.test(b)&&!ca[b],y=M.arr(b),v=!A&&!y&&!R;let E=M.und(i[w])?b:i[w],T=A||y||R?b:1,P=vt(c,w);g&&(T=g.animations[w].parent);let O=S.parent,D=S.interpolation,F=vr(g?T.getPayload():T),_,J=b;v&&(J=Fr({range:[0,1],output:[b,b]})(1));let be=D&&D.getValue();const W=!M.und(O)&&S.animatedValues.some($=>!$.done),X=!M.equ(J,be),ce=!M.equ(J,S.previous),ie=!M.equ(P,S.config);if(l||ce&&X||ie){if(A||R)O=D=S.parent||new wn(E);else if(y)O=D=S.parent||new Js(E);else if(v){let $=S.interpolation&&S.interpolation.calc(S.parent.value);$=$!==void 0&&!l?$:E,S.parent?(O=S.parent,O.setValue(0,!1)):O=new wn(0);const Me={output:[$,b]};S.interpolation?(D=S.interpolation,S.interpolation.updateConfig(Me)):D=O.interpolate(Me)}return F=vr(g?T.getPayload():T),_=vr(O.getPayload()),l&&!v&&O.setValue(E,!1),this.hasChanged=!0,_.forEach($=>{$.startPosition=$.value,$.lastPosition=$.value,$.lastVelocity=W?$.lastVelocity:void 0,$.lastTime=W?$.lastTime:void 0,$.startTime=la(),$.done=!1,$.animatedStyles.clear()}),vt(d,w)&&O.setValue(v?T:b,!1),fe({},m,{[w]:fe({},S,{name:w,parent:O,interpolation:D,animatedValues:_,toValues:F,previous:J,config:P,fromValues:vr(O.getValue()),immediate:vt(d,w),initialVelocity:Ke(P.velocity,0),clamp:Ke(P.clamp,!1),precision:Ke(P.precision,.01),tension:Ke(P.tension,170),friction:Ke(P.friction,26),mass:Ke(P.mass,1),duration:P.duration,easing:Ke(P.easing,$=>$),decay:P.decay})})}else return X?m:(v&&(O.setValue(1,!1),D.updateConfig({output:[J,J]})),O.done=!0,this.hasChanged=!0,fe({},m,{[w]:fe({},m[w],{previous:J})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let m in this.animations)this.interpolations[m]=this.animations[m].interpolation,this.values[m]=this.animations[m].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const Qs=(t,e)=>{const r=p.useRef(!1),n=p.useRef(),i=M.fun(e),a=p.useMemo(()=>{n.current&&(n.current.map(l=>l.destroy()),n.current=void 0);let f;return[new Array(t).fill().map((l,d)=>{const h=new Ys,g=i?vt(e,d,h):e[d];return d===0&&(f=g.ref),h.update(g),f||h.start(),h}),f]},[t]),o=a[0],s=a[1];n.current=o,p.useImperativeHandle(s,()=>({start:()=>Promise.all(n.current.map(f=>new Promise(l=>f.start(l)))),stop:f=>n.current.forEach(l=>l.stop(f)),get controllers(){return n.current}}));const c=p.useMemo(()=>f=>n.current.map((l,d)=>{l.update(i?vt(f,d,l):f[d]),s||l.start()}),[t]);p.useEffect(()=>{r.current?i||c(e):s||n.current.forEach(f=>f.start())}),p.useEffect(()=>(r.current=!0,()=>n.current.forEach(f=>f.destroy())),[]);const u=n.current.map(f=>f.getValues());return i?[u,c,f=>n.current.forEach(l=>l.pause(f))]:u},eu=t=>{const e=M.fun(t),r=Qs(1,e?t:[t]),n=r[0],i=r[1],a=r[2];return e?[n[0],i,a]:n};class tu extends ua{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Ie)&&(e=Ln.transform(e)),this.payload=e}}const Br={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ne="[-+]?\\d*\\.?\\d+",$r=Ne+"%";function Wr(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const ru=new RegExp("rgb"+Wr(Ne,Ne,Ne)),nu=new RegExp("rgba"+Wr(Ne,Ne,Ne,Ne)),iu=new RegExp("hsl"+Wr(Ne,$r,$r)),au=new RegExp("hsla"+Wr(Ne,$r,$r,Ne)),ou=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,su=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,uu=/^#([0-9a-fA-F]{6})$/,cu=/^#([0-9a-fA-F]{8})$/;function fu(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=uu.exec(t))?parseInt(e[1]+"ff",16)>>>0:Br.hasOwnProperty(t)?Br[t]:(e=ru.exec(t))?(dt(e[1])<<24|dt(e[2])<<16|dt(e[3])<<8|255)>>>0:(e=nu.exec(t))?(dt(e[1])<<24|dt(e[2])<<16|dt(e[3])<<8|fi(e[4]))>>>0:(e=ou.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=cu.exec(t))?parseInt(e[1],16)>>>0:(e=su.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=iu.exec(t))?(ui(ci(e[1]),pr(e[2]),pr(e[3]))|255)>>>0:(e=au.exec(t))?(ui(ci(e[1]),pr(e[2]),pr(e[3]))|fi(e[4]))>>>0:null}function nn(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function ui(t,e,r){const n=r<.5?r*(1+e):r+e-r*e,i=2*r-n,a=nn(i,n,t+1/3),o=nn(i,n,t),s=nn(i,n,t-1/3);return Math.round(a*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function dt(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function ci(t){return(parseFloat(t)%360+360)%360/360}function fi(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function pr(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function li(t){let e=fu(t);if(e===null)return t;e=e||0;let r=(e&4278190080)>>>24,n=(e&16711680)>>>16,i=(e&65280)>>>8,a=(e&255)/255;return`rgba(${r}, ${n}, ${i}, ${a})`}const yr=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,lu=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,du=new RegExp(`(${Object.keys(Br).join("|")})`,"g"),hu=t=>{const e=t.output.map(i=>i.replace(lu,li)).map(i=>i.replace(du,li)),r=e[0].match(yr).map(()=>[]);e.forEach(i=>{i.match(yr).forEach((a,o)=>r[o].push(+a))});const n=e[0].match(yr).map((i,a)=>Vr(fe({},t,{output:r[a]})));return i=>{let a=0;return e[0].replace(yr,()=>n[a++](i)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(o,s,c,u,f)=>`rgba(${Math.round(s)}, ${Math.round(c)}, ${Math.round(u)}, ${f})`)}};let $t={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const vu=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),pu=["Webkit","Ms","Moz","O"];$t=Object.keys($t).reduce((t,e)=>(pu.forEach(r=>t[vu(r,e)]=t[e]),t),$t);function yu(t,e,r){return e==null||typeof e=="boolean"||e===""?"":!r&&typeof e=="number"&&e!==0&&!($t.hasOwnProperty(t)&&$t[t])?e+"px":(""+e).trim()}const di={};$s(t=>new tu(t));Vs(hu);Fs(Br);zs((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const i=e.style,a=e.children,o=e.scrollTop,s=e.scrollLeft,c=yt(e,["style","children","scrollTop","scrollLeft"]),u=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";o!==void 0&&(t.scrollTop=o),s!==void 0&&(t.scrollLeft=s),a!==void 0&&(t.textContent=a);for(let f in i)if(i.hasOwnProperty(f)){var r=f.indexOf("--")===0,n=yu(f,i[f],r);f==="float"&&(f="cssFloat"),r?t.style.setProperty(f,n):t.style[f]=n}for(let f in c){const l=u?f:di[f]||(di[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase()));typeof t.getAttribute(l)<"u"&&t.setAttribute(l,c[f])}return}else return!1},t=>t);const gu=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],mu=Ns(_s),bu=mu(gu);function hi(t,e){return t.map(function(r,n){return r+e[n]})}function pa(t,e){return t.map(function(r,n){return r-e[n]})}function Sn(t){return Math.hypot.apply(Math,t)}function wu(t,e,r){var n=Sn(e),i=n===0?0:1/n,a=r===0?0:1/r,o=a*n,s=e.map(function(f){return a*f}),c=e.map(function(f){return i*f}),u=Sn(t);return{velocities:s,velocity:o,distance:u,direction:c}}function xn(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Su(t,e,r){return Math.max(e,Math.min(t,r))}function xu(t,e){return Math.pow(t,e*5)}function vi(t,e,r){return e===0||Math.abs(e)===1/0?xu(t,r):t*e*r/(e+r*t)}function Ht(t,e,r,n){return n===void 0&&(n=.15),n===0?Su(t,e,r):t<e?-vi(e-t,r-e,n)+e:t>r?+vi(t-r,r-e,n)+r:t}function Eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ku(t,e,r){return e&&Eu(t.prototype,e),t}function xe(){return xe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xe.apply(this,arguments)}function ya(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ou(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function gr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tu(t,e){if(t){if(typeof t=="string")return pi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pi(t,e)}}function pi(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zr(t,e){var r;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(r=Tu(t))||e){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return r=t[Symbol.iterator](),r.next.bind(r)}function ga(){}function ma(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?ga:e.length===1?e[0]:function(){for(var n,i=Zr(e),a;!(a=i()).done;){var o=a.value;n=o.apply(this,arguments)||n}return n}}function _e(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function mr(t){if(typeof t=="function"){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.apply(void 0,r)}else return t}function jn(t,e){t===void 0&&(t={});for(var r={},n=0,i=Object.entries(e);n<i.length;n++){var a=i[n],o=a[0],s=a[1];switch(typeof s){case"function":r[o]=s.call(r,t[o],o,t);break;case"object":r[o]=jn(t[o],s);break;case"boolean":s&&(r[o]=t[o]);break}}return r}var Cu=180,Ru=.15,Au=.5,Pu=60,Du={threshold:function(e){return e===void 0&&(e=0),_e(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return _e(Ru);case!1:return _e(0);default:return _e(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:_e(e)}},ba=xe({},Du,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(l){return ba.bounds(e(l))};var r=e,n=r.left,i=n===void 0?-1/0:n,a=r.right,o=a===void 0?1/0:a,s=r.top,c=s===void 0?-1/0:s,u=r.bottom,f=u===void 0?1/0:u;return[[i,o],[c,f]]}}),Iu=typeof window<"u"&&window.document&&window.document.createElement,Nu={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:function(t){function e(r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return t===void 0&&(t=Iu?window:void 0),t}),eventOptions:function(e){var r=e===void 0?{}:e,n=r.passive,i=n===void 0?!0:n,a=r.capture,o=a===void 0?!1:a;return{passive:i,capture:o}}},Lu=xe({},ba,{threshold:function(e,r,n){var i=n.filterTaps,a=i===void 0?!1:i,o=n.lockDirection,s=o===void 0?!1:o,c=n.axis,u=c===void 0?void 0:c,f=_e(e,a?3:s||u?1:0);return this.filterTaps=a||f[0]+f[1]>0,f},swipeVelocity:function(e){return e===void 0&&(e=Au),_e(e)},swipeDistance:function(e){return e===void 0&&(e=Pu),_e(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return Cu;case!1:return 0;default:return e}}});function ju(t){return t===void 0&&(t={}),jn(t,Nu)}function Mu(t){return t===void 0&&(t={}),jn(t,Lu)}function zu(t){var e=t.domTarget,r=t.eventOptions,n=t.window,i=t.enabled,a=Ou(t,["domTarget","eventOptions","window","enabled"]),o=ju({domTarget:e,eventOptions:r,window:n,enabled:i});return o.drag=Mu(a),o}function Pt(t){return xe({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ga,canceled:!1,memo:void 0,args:void 0},t)}function wa(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Pt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),r=Pt({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),n=Pt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Pt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Pt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:r,wheel:n,move:i,scroll:a}}var We=new Map,Fu=function(){function t(r,n){var i=this;n===void 0&&(n=[]),this.controller=r,this.args=n,this.debounced=!0,this.setTimeout=function(a,o){var s;o===void 0&&(o=140),clearTimeout(i.controller.timeouts[i.stateKey]);for(var c=arguments.length,u=new Array(c>2?c-2:0),f=2;f<c;f++)u[f-2]=arguments[f];i.controller.timeouts[i.stateKey]=(s=window).setTimeout.apply(s,[a,o].concat(u))},this.clearTimeout=function(){clearTimeout(i.controller.timeouts[i.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),i.state._blocked)return i.debounced||(i.state._active=!1,i.clean()),null;if(!a&&!i.state.intentional&&!i.config.triggerAllEvents)return null;if(i.state.intentional){var o=i.state.active,s=i.state._active;i.state.active=s,i.state.first=s&&!o,i.state.last=o&&!s,i.controller.state.shared[i.ingKey]=s}var c=xe({},i.controller.state.shared,i.state,i.mapStateValues(i.state)),u=i.handler(c);return i.state.memo=u!==void 0?u:i.state.memo,i.state._active||i.clean(),c}}var e=t.prototype;return e.updateSharedState=function(n){Object.assign(this.controller.state.shared,n)},e.updateGestureState=function(n){Object.assign(this.state,n)},e.checkIntentionality=function(n,i){return{_intentional:n,_blocked:!1}},e.getMovement=function(n){var i=this.config,a=i.initial,o=i.bounds,s=i.rubberband,c=i.threshold,u=this.state,f=u._bounds,l=u._initial,d=u._active,h=u._intentional,g=u.lastOffset,m=u.movement,k=this.getInternalMovement(n,this.state),w=h[0]===!1?yi(k[0],c[0]):h[0],b=h[1]===!1?yi(k[1],c[1]):h[1],S=this.checkIntentionality([w,b],k);if(S._blocked)return xe({},S,{_movement:k,delta:[0,0]});var A=S._intentional,R=k,y,v;if(A[0]!==!1&&h[0]===!1&&(v=mr(a,this.state),y=mr(o,this.state),l[0]=v[0],f[0]=y[0]),A[1]!==!1&&h[1]===!1){var E,T;v=(E=v)!=null?E:mr(a,this.state),y=(T=y)!=null?T:mr(o,this.state),l[1]=v[1],f[1]=y[1]}var P=[A[0]!==!1?k[0]-A[0]:l[0],A[1]!==!1?k[1]-A[1]:l[1]],O=hi(P,g),D=d?s:[0,0];return P=gi(f,hi(P,l),D),xe({},S,{intentional:A[0]!==!1||A[1]!==!1,_initial:l,_movement:R,movement:P,values:n,offset:gi(f,O,D),delta:pa(P,m)})},e.clean=function(){this.clearTimeout()},ku(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t}();function yi(t,e){return Math.abs(t)>=e?xn(t)*e:!1}function gi(t,e,r){var n=e[0],i=e[1],a=r[0],o=r[1],s=t[0],c=s[0],u=s[1],f=t[1],l=f[0],d=f[1];return[Ht(n,c,u,a),Ht(i,l,d,o)]}function an(t,e,r){var n=t.state,i=t.args,a=e.timeStamp,o=e.type,s=n.values,c=r?0:a-n.startTime;return{_lastEventType:o,event:e,timeStamp:a,elapsedTime:c,args:i,previous:s}}function Vu(t,e,r){var n=t.state.offset,i=r.timeStamp;return xe({},wa()[t.stateKey],{_active:!0,values:e,initial:e,offset:n,lastOffset:n,startTime:i})}function Bu(t,e){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.call.apply(t,[this,xe({},e,{event:r})].concat(i))}}var $u=function(e){var r=this;this.classes=e,this.bind=function(){for(var n={},i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=Zr(r.classes),c;!(c=s()).done;){var u=c.value;new u(r,a).addBindings(n)}for(var f=0,l=Object.entries(r.nativeRefs);f<l.length;f++){var d=l[f],h=d[0],g=d[1];En(n,h,Bu(g,xe({},r.state.shared,{args:a})))}return r.config.domTarget?qu(r,n):Uu(r,n)},this.effect=function(){return r.config.domTarget&&r.bind(),r.clean},this.clean=function(){var n=xa(r.config),i=r.config.eventOptions;n&&Qt(n,Sa(r.domListeners),i),Object.values(r.timeouts).forEach(clearTimeout),Hu(r)},this.state=wa(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function Hu(t){var e=t.config,r=e.window,n=e.eventOptions,i=t.windowListeners;if(r){for(var a in i){var o=i[a];Qt(r,o,n)}t.windowListeners={}}}function Gu(t,e){var r=t.config,n=t.windowListeners;r.window&&(Qt(r.window,n[e],r.eventOptions),delete n[e])}function _u(t,e,r){var n=t.config,i=t.windowListeners;r===void 0&&(r=[]),n.window&&(Qt(n.window,i[e],n.eventOptions),Ea(n.window,i[e]=r,n.eventOptions))}function qu(t,e){var r=t.config,n=t.domListeners,i=xa(r);if(!i)throw new Error("domTarget must be defined");var a=r.eventOptions;Qt(i,Sa(n),a);for(var o=0,s=Object.entries(e);o<s.length;o++){var c=s[o],u=c[0],f=c[1],l=u.slice(2).toLowerCase();n.push([l,ma.apply(void 0,f)])}Ea(i,n,a)}function Uu(t,e){for(var r=t.config,n={},i=r.eventOptions.capture?"Capture":"",a=0,o=Object.entries(e);a<o.length;a++){var s=o[a],c=s[0],u=s[1],f=Array.isArray(u)?u:[u],l=c+i;n[l]=ma.apply(void 0,f)}return n}function Sa(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function xa(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function En(t,e,r){t[e]||(t[e]=[]),t[e].push(r)}function Ea(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={});for(var n=Zr(e),i;!(i=n()).done;){var a=i.value,o=a[0],s=a[1];t.addEventListener(o,s,r)}}function Qt(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={});for(var n=Zr(e),i;!(i=n()).done;){var a=i.value,o=a[0],s=a[1];t.removeEventListener(o,s,r)}}function Ku(t,e,r){r===void 0&&(r={});var n=Zu(t),i=le.useMemo(function(){return new $u(n)},[]);return i.config=e,i.handlers=t,i.nativeRefs=r,le.useEffect(i.effect,[]),i.config.domTarget?Wu:i.bind}function Wu(){}function Zu(t){var e=new Set;return t.drag&&e.add(We.get("drag")),t.wheel&&e.add(We.get("wheel")),t.scroll&&e.add(We.get("scroll")),t.move&&e.add(We.get("move")),t.pinch&&e.add(We.get("pinch")),t.hover&&e.add(We.get("hover")),e}var Ju=function(t){ya(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.getInternalMovement=function(i,a){return pa(i,a.initial)},r.checkIntentionality=function(i,a){if(i[0]===!1&&i[1]===!1)return{_intentional:i,axis:this.state.axis};var o=a.map(Math.abs),s=o[0],c=o[1],u=this.state.axis||(s>c?"x":s<c?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:i,_blocked:!1,axis:u}:u?this.config.axis&&u!==this.config.axis?{_intentional:i,_blocked:!0,axis:u}:(i[u==="x"?1:0]=!1,{_intentional:i,_blocked:!1,axis:u}):{_intentional:[!1,!1],_blocked:!1,axis:u}},r.getKinematics=function(i,a){var o=this.getMovement(i);if(!o._blocked){var s=a.timeStamp-this.state.timeStamp;Object.assign(o,wu(o.movement,o.delta,s))}return o},r.mapStateValues=function(i){return{xy:i.values,vxvy:i.velocities}},e}(Fu);function ka(t){if("touches"in t){var e=t.targetTouches,r=t.changedTouches;return e.length>0?e:r}return null}function mi(t){var e="buttons"in t?t.buttons:0,r=ka(t),n=r&&r.length||0,i=n>0||e>0,a=t.shiftKey,o=t.altKey,s=t.metaKey,c=t.ctrlKey;return{touches:n,down:i,buttons:e,shiftKey:a,altKey:o,metaKey:s,ctrlKey:c}}function bi(t){var e=ka(t),r=e?e[0]:t,n=r.clientX,i=r.clientY;return[n,i]}var Xu=3,Yu=220,Qu=function(t){ya(e,t);function e(){var n;return n=t.apply(this,arguments)||this,n.ingKey="dragging",n.stateKey="drag",n.onDragStart=function(i){!n.enabled||n.state._active||(_u(n.controller,n.stateKey,[["pointermove",n.onDragChange],["pointerup",n.onDragEnd],["pointercancel",n.onDragEnd]]),n.updateGestureState({_pointerId:i.pointerId}),n.config.delay>0?(n.state._delayedEvent=!0,"persist"in i&&typeof i.persist=="function"&&i.persist(),n.setTimeout(n.startDrag.bind(gr(n)),n.config.delay,i)):n.startDrag(i))},n.onDragChange=function(i){if(!n.state.canceled&&i.pointerId===n.state._pointerId){if(!n.state._active){n.state._delayedEvent&&(n.clearTimeout(),n.startDrag(i));return}var a=mi(i);if(!a.down){n.onDragEnd(i);return}n.updateSharedState(a);var o=bi(i),s=n.getKinematics(o,i),c=an(gr(n),i),u=n.state._isTap,f=Sn(s._movement);u&&f>=Xu&&(u=!1),n.updateGestureState(xe({},c,s,{_isTap:u})),n.fireGestureHandler()}},n.onDragEnd=function(i){if(i.pointerId===n.state._pointerId){n.state._active=!1,n.updateSharedState({down:!1,buttons:0,touches:0});var a=n.state._isTap,o=n.state.velocities,s=o[0],c=o[1],u=n.state.movement,f=u[0],l=u[1],d=n.state._intentional,h=d[0],g=d[1],m=n.config.swipeVelocity,k=m[0],w=m[1],b=n.config.swipeDistance,S=b[0],A=b[1],R=xe({},an(gr(n),i),n.getMovement(n.state.values)),y=[0,0];R.elapsedTime<Yu&&(h!==!1&&Math.abs(s)>k&&Math.abs(f)>S&&(y[0]=xn(s)),g!==!1&&Math.abs(c)>w&&Math.abs(l)>A&&(y[1]=xn(c))),n.updateGestureState(xe({},R,{tap:a,swipe:y})),n.fireGestureHandler(a===!0)}},n.clean=function(){t.prototype.clean.call(gr(n)),n.state._delayedEvent=!1,Gu(n.controller,n.stateKey)},n.onCancel=function(){n.state.canceled||(n.updateGestureState({canceled:!0}),n.state._active=!1,n.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return n.fireGestureHandler()}))},n.onClick=function(i){n.state._isTap||i.stopPropagation()},n}var r=e.prototype;return r.startDrag=function(i){var a=bi(i);this.updateSharedState(mi(i)),this.updateGestureState(xe({},Vu(this,a,i),an(this,i,!0),{_pointerId:i.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},r.addBindings=function(i){if(En(i,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";En(i,a,this.onClick)}},e}(Ju);function ec(t,e){var r,n=[],i,a=!1;function o(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return a&&r===this&&e(c,n)||(i=t.apply(this,c),a=!0,r=this,n=c),i}return o}function Pr(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Pr(t[n],e[n]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;for(a=t.entries();!(n=a.next()).done;)if(!Pr(n.value[1],e.get(n.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!(i[n]==="_owner"&&t.$$typeof)&&!Pr(t[i[n]],e[i[n]]))return!1;return!0}return t!==t&&e!==e}function tc(t,e){try{return Pr(t,e)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}function rc(t,e){e===void 0&&(e={}),We.set("drag",Qu);var r=p.useRef();return r.current||(r.current=ec(zu,tc)),Ku({drag:t},r.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Oa=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Hr=Oa.join(","),Ta=typeof Element>"u",Qe=Ta?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,kn=!Ta&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},Ca=function(e,r,n){var i=Array.prototype.slice.apply(e.querySelectorAll(Hr));return r&&Qe.call(e,Hr)&&i.unshift(e),i=i.filter(n),i},Ra=function t(e,r,n){for(var i=[],a=Array.from(e);a.length;){var o=a.shift();if(o.tagName==="SLOT"){var s=o.assignedElements(),c=s.length?s:o.children,u=t(c,!0,n);n.flatten?i.push.apply(i,u):i.push({scope:o,candidates:u})}else{var f=Qe.call(o,Hr);f&&n.filter(o)&&(r||!e.includes(o))&&i.push(o);var l=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),d=!n.shadowRootFilter||n.shadowRootFilter(o);if(l&&d){var h=t(l===!0?o.children:l.children,!0,n);n.flatten?i.push.apply(i,h):i.push({scope:o,candidates:h})}else a.unshift.apply(a,o.children)}}return i},Aa=function(e,r){return e.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},nc=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Pa=function(e){return e.tagName==="INPUT"},ic=function(e){return Pa(e)&&e.type==="hidden"},ac=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return r},oc=function(e,r){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===r)return e[n]},sc=function(e){if(!e.name)return!0;var r=e.form||kn(e),n=function(s){return r.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(e.name));else try{i=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=oc(i,e.form);return!a||a===e},uc=function(e){return Pa(e)&&e.type==="radio"},cc=function(e){return uc(e)&&!sc(e)},wi=function(e){var r=e.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},fc=function(e,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=Qe.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(Qe.call(o,"details:not([open]) *"))return!0;var s=kn(e).host,c=(s==null?void 0:s.ownerDocument.contains(s))||e.ownerDocument.contains(e);if(!n||n==="full"){if(typeof i=="function"){for(var u=e;e;){var f=e.parentElement,l=kn(e);if(f&&!f.shadowRoot&&i(f)===!0)return wi(e);e.assignedSlot?e=e.assignedSlot:!f&&l!==e.ownerDocument?e=l.host:e=f}e=u}if(c)return!e.getClientRects().length}else if(n==="non-zero-area")return wi(e);return!1},lc=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return Qe.call(r,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}r=r.parentElement}return!1},Gr=function(e,r){return!(r.disabled||ic(r)||fc(r,e)||ac(r)||lc(r))},On=function(e,r){return!(cc(r)||Aa(r)<0||!Gr(e,r))},dc=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},hc=function t(e){var r=[],n=[];return e.forEach(function(i,a){var o=!!i.scope,s=o?i.scope:i,c=Aa(s,o),u=o?t(i.candidates):s;c===0?o?r.push.apply(r,u):r.push(s):n.push({documentOrder:a,tabIndex:c,item:i,isScope:o,content:u})}),n.sort(nc).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(r)},vc=function(e,r){r=r||{};var n;return r.getShadowRoot?n=Ra([e],r.includeContainer,{filter:On.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:dc}):n=Ca(e,r.includeContainer,On.bind(null,r)),hc(n)},pc=function(e,r){r=r||{};var n;return r.getShadowRoot?n=Ra([e],r.includeContainer,{filter:Gr.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=Ca(e,r.includeContainer,Gr.bind(null,r)),n},br=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return Qe.call(e,Hr)===!1?!1:On(r,e)},yc=Oa.concat("iframe").join(","),on=function(e,r){if(r=r||{},!e)throw new Error("No node provided");return Qe.call(e,yc)===!1?!1:Gr(r,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Si(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Si(Object(r),!0).forEach(function(n){gc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ei=function(){var t=[];return{activateTrap:function(r){if(t.length>0){var n=t[t.length-1];n!==r&&n.pause()}var i=t.indexOf(r);i===-1||t.splice(i,1),t.push(r)},deactivateTrap:function(r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}}}(),mc=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},bc=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},wc=function(e){return e.key==="Tab"||e.keyCode===9},ki=function(e){return setTimeout(e,0)},Oi=function(e,r){var n=-1;return e.every(function(i,a){return r(i)?(n=a,!1):!0}),n},Dt=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,n):e},wr=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Sc=function(e,r){var n=(r==null?void 0:r.document)||document,i=xi({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o,s=function(y,v,E){return y&&y[v]!==void 0?y[v]:i[E||v]},c=function(y){return a.containerGroups.findIndex(function(v){var E=v.container,T=v.tabbableNodes;return E.contains(y)||T.find(function(P){return P===y})})},u=function(y){var v=i[y];if(typeof v=="function"){for(var E=arguments.length,T=new Array(E>1?E-1:0),P=1;P<E;P++)T[P-1]=arguments[P];v=v.apply(void 0,T)}if(v===!0&&(v=void 0),!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(y,"` was specified but was not a node, or did not return a node"))}var O=v;if(typeof v=="string"&&(O=n.querySelector(v),!O))throw new Error("`".concat(y,"` as selector refers to no known node"));return O},f=function(){var y=u("initialFocus");if(y===!1)return!1;if(y===void 0)if(c(n.activeElement)>=0)y=n.activeElement;else{var v=a.tabbableGroups[0],E=v&&v.firstTabbableNode;y=E||u("fallbackFocus")}if(!y)throw new Error("Your focus-trap needs to have at least one focusable element");return y},l=function(){if(a.containerGroups=a.containers.map(function(y){var v=vc(y,i.tabbableOptions),E=pc(y,i.tabbableOptions);return{container:y,tabbableNodes:v,focusableNodes:E,firstTabbableNode:v.length>0?v[0]:null,lastTabbableNode:v.length>0?v[v.length-1]:null,nextTabbableNode:function(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=E.findIndex(function(F){return F===P});if(!(D<0))return O?E.slice(D+1).find(function(F){return br(F,i.tabbableOptions)}):E.slice(0,D).reverse().find(function(F){return br(F,i.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(y){return y.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},d=function R(y){if(y!==!1&&y!==n.activeElement){if(!y||!y.focus){R(f());return}y.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=y,mc(y)&&y.select()}},h=function(y){var v=u("setReturnFocus",y);return v||(v===!1?!1:y)},g=function(y){var v=wr(y);if(!(c(v)>=0)){if(Dt(i.clickOutsideDeactivates,y)){o.deactivate({returnFocus:i.returnFocusOnDeactivate&&!on(v,i.tabbableOptions)});return}Dt(i.allowOutsideClick,y)||y.preventDefault()}},m=function(y){var v=wr(y),E=c(v)>=0;E||v instanceof Document?E&&(a.mostRecentlyFocusedNode=v):(y.stopImmediatePropagation(),d(a.mostRecentlyFocusedNode||f()))},k=function(y){var v=wr(y);l();var E=null;if(a.tabbableGroups.length>0){var T=c(v),P=T>=0?a.containerGroups[T]:void 0;if(T<0)y.shiftKey?E=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:E=a.tabbableGroups[0].firstTabbableNode;else if(y.shiftKey){var O=Oi(a.tabbableGroups,function(ne){var W=ne.firstTabbableNode;return v===W});if(O<0&&(P.container===v||on(v,i.tabbableOptions)&&!br(v,i.tabbableOptions)&&!P.nextTabbableNode(v,!1))&&(O=T),O>=0){var D=O===0?a.tabbableGroups.length-1:O-1,F=a.tabbableGroups[D];E=F.lastTabbableNode}}else{var _=Oi(a.tabbableGroups,function(ne){var W=ne.lastTabbableNode;return v===W});if(_<0&&(P.container===v||on(v,i.tabbableOptions)&&!br(v,i.tabbableOptions)&&!P.nextTabbableNode(v))&&(_=T),_>=0){var J=_===a.tabbableGroups.length-1?0:_+1,be=a.tabbableGroups[J];E=be.firstTabbableNode}}}else E=u("fallbackFocus");E&&(y.preventDefault(),d(E))},w=function(y){if(bc(y)&&Dt(i.escapeDeactivates,y)!==!1){y.preventDefault(),o.deactivate();return}if(wc(y)){k(y);return}},b=function(y){var v=wr(y);c(v)>=0||Dt(i.clickOutsideDeactivates,y)||Dt(i.allowOutsideClick,y)||(y.preventDefault(),y.stopImmediatePropagation())},S=function(){if(a.active)return Ei.activateTrap(o),a.delayInitialFocusTimer=i.delayInitialFocus?ki(function(){d(f())}):d(f()),n.addEventListener("focusin",m,!0),n.addEventListener("mousedown",g,{capture:!0,passive:!1}),n.addEventListener("touchstart",g,{capture:!0,passive:!1}),n.addEventListener("click",b,{capture:!0,passive:!1}),n.addEventListener("keydown",w,{capture:!0,passive:!1}),o},A=function(){if(a.active)return n.removeEventListener("focusin",m,!0),n.removeEventListener("mousedown",g,!0),n.removeEventListener("touchstart",g,!0),n.removeEventListener("click",b,!0),n.removeEventListener("keydown",w,!0),o};return o={get active(){return a.active},get paused(){return a.paused},activate:function(y){if(a.active)return this;var v=s(y,"onActivate"),E=s(y,"onPostActivate"),T=s(y,"checkCanFocusTrap");T||l(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,v&&v();var P=function(){T&&l(),S(),E&&E()};return T?(T(a.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(y){if(!a.active)return this;var v=xi({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},y);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,A(),a.active=!1,a.paused=!1,Ei.deactivateTrap(o);var E=s(v,"onDeactivate"),T=s(v,"onPostDeactivate"),P=s(v,"checkCanReturnFocus"),O=s(v,"returnFocus","returnFocusOnDeactivate");E&&E();var D=function(){ki(function(){O&&d(h(a.nodeFocusedBeforeActivation)),T&&T()})};return O&&P?(P(h(a.nodeFocusedBeforeActivation)).then(D,D),this):(D(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,A(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,l(),S(),this)},updateContainerElements:function(y){var v=[].concat(y).filter(Boolean);return a.containers=v.map(function(E){return typeof E=="string"?n.querySelector(E):E}),a.active&&l(),this}},o.updateContainerElements(e),o};function xc(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}var Mn=!1;if(typeof window<"u"){var Ti={get passive(){Mn=!0}};window.addEventListener("testPassive",null,Ti),window.removeEventListener("testPassive",null,Ti)}var Da=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),qe=[],_r=!1,Ia=-1,Gt=void 0,_t=void 0,Na=function(e){return qe.some(function(r){return!!(r.options.allowTouchMove&&r.options.allowTouchMove(e))})},qr=function(e){var r=e||window.event;return Na(r.target)||r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)},Ec=function(e){if(_t===void 0){var r=!!e&&e.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;r&&n>0&&(_t=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}Gt===void 0&&(Gt=document.body.style.overflow,document.body.style.overflow="hidden")},kc=function(){_t!==void 0&&(document.body.style.paddingRight=_t,_t=void 0),Gt!==void 0&&(document.body.style.overflow=Gt,Gt=void 0)},Oc=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},Tc=function(e,r){var n=e.targetTouches[0].clientY-Ia;return Na(e.target)?!1:r&&r.scrollTop===0&&n>0||Oc(r)&&n<0?qr(e):(e.stopPropagation(),!0)},Cc=function(e,r){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!qe.some(function(i){return i.targetElement===e})){var n={targetElement:e,options:r||{}};qe=[].concat(xc(qe),[n]),Da?(e.ontouchstart=function(i){i.targetTouches.length===1&&(Ia=i.targetTouches[0].clientY)},e.ontouchmove=function(i){i.targetTouches.length===1&&Tc(i,e)},_r||(document.addEventListener("touchmove",qr,Mn?{passive:!1}:void 0),_r=!0)):Ec(r)}},Rc=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}qe=qe.filter(function(r){return r.targetElement!==e}),Da?(e.ontouchstart=null,e.ontouchmove=null,_r&&qe.length===0&&(document.removeEventListener("touchmove",qr,Mn?{passive:!1}:void 0),_r=!1)):qe.length||kc()},Xe=[],Ac=function(){return Xe.some(function(t){return t.activeTargets.length>0})},Pc=function(){return Xe.some(function(t){return t.skippedTargets.length>0})},Ci="ResizeObserver loop completed with undelivered notifications.",Dc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Ci}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Ci),window.dispatchEvent(t)},Xt;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Xt||(Xt={}));var Ye=function(t){return Object.freeze(t)},Ic=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Ye(this)}return t}(),La=function(){function t(e,r,n,i){return this.x=e,this.y=r,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ye(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,i=e.top,a=e.right,o=e.bottom,s=e.left,c=e.width,u=e.height;return{x:r,y:n,top:i,right:a,bottom:o,left:s,width:c,height:u}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),zn=function(t){return t instanceof SVGElement&&"getBBox"in t},ja=function(t){if(zn(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var i=t,a=i.offsetWidth,o=i.offsetHeight;return!(a||o||t.getClientRects().length)},Ri=function(t){var e;if(t instanceof Element)return!0;var r=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Nc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},qt=typeof window<"u"?window:{},Sr=new WeakMap,Ai=/auto|scroll/,Lc=/^tb|vertical/,jc=/msie|trident/i.test(qt.navigator&&qt.navigator.userAgent),je=function(t){return parseFloat(t||"0")},gt=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new Ic((r?e:t)||0,(r?t:e)||0)},Pi=Ye({devicePixelContentBoxSize:gt(),borderBoxSize:gt(),contentBoxSize:gt(),contentRect:new La(0,0,0,0)}),Ma=function(t,e){if(e===void 0&&(e=!1),Sr.has(t)&&!e)return Sr.get(t);if(ja(t))return Sr.set(t,Pi),Pi;var r=getComputedStyle(t),n=zn(t)&&t.ownerSVGElement&&t.getBBox(),i=!jc&&r.boxSizing==="border-box",a=Lc.test(r.writingMode||""),o=!n&&Ai.test(r.overflowY||""),s=!n&&Ai.test(r.overflowX||""),c=n?0:je(r.paddingTop),u=n?0:je(r.paddingRight),f=n?0:je(r.paddingBottom),l=n?0:je(r.paddingLeft),d=n?0:je(r.borderTopWidth),h=n?0:je(r.borderRightWidth),g=n?0:je(r.borderBottomWidth),m=n?0:je(r.borderLeftWidth),k=l+u,w=c+f,b=m+h,S=d+g,A=s?t.offsetHeight-S-t.clientHeight:0,R=o?t.offsetWidth-b-t.clientWidth:0,y=i?k+b:0,v=i?w+S:0,E=n?n.width:je(r.width)-y-R,T=n?n.height:je(r.height)-v-A,P=E+k+R+b,O=T+w+A+S,D=Ye({devicePixelContentBoxSize:gt(Math.round(E*devicePixelRatio),Math.round(T*devicePixelRatio),a),borderBoxSize:gt(P,O,a),contentBoxSize:gt(E,T,a),contentRect:new La(l,c,E,T)});return Sr.set(t,D),D},za=function(t,e,r){var n=Ma(t,r),i=n.borderBoxSize,a=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case Xt.DEVICE_PIXEL_CONTENT_BOX:return o;case Xt.BORDER_BOX:return i;default:return a}},Mc=function(){function t(e){var r=Ma(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Ye([r.borderBoxSize]),this.contentBoxSize=Ye([r.contentBoxSize]),this.devicePixelContentBoxSize=Ye([r.devicePixelContentBoxSize])}return t}(),Fa=function(t){if(ja(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},zc=function(){var t=1/0,e=[];Xe.forEach(function(o){if(o.activeTargets.length!==0){var s=[];o.activeTargets.forEach(function(u){var f=new Mc(u.target),l=Fa(u.target);s.push(f),u.lastReportedSize=za(u.target,u.observedBox),l<t&&(t=l)}),e.push(function(){o.callback.call(o.observer,s,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var i=n[r];i()}return t},Di=function(t){Xe.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(i){i.isActive()&&(Fa(i.target)>t?r.activeTargets.push(i):r.skippedTargets.push(i))})})},Fc=function(){var t=0;for(Di(t);Ac();)t=zc(),Di(t);return Pc()&&Dc(),t>0},sn,Va=[],Vc=function(){return Va.splice(0).forEach(function(t){return t()})},Bc=function(t){if(!sn){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Vc()}).observe(r,n),sn=function(){r.textContent="".concat(e?e--:e++)}}Va.push(t),sn()},$c=function(t){Bc(function(){requestAnimationFrame(t)})},Dr=0,Hc=function(){return!!Dr},Gc=250,_c={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ii=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ni=function(t){return t===void 0&&(t=0),Date.now()+t},un=!1,qc=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Gc),!un){un=!0;var n=Ni(e);$c(function(){var i=!1;try{i=Fc()}finally{if(un=!1,e=n-Ni(),!Hc())return;i?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,_c)};document.body?r():qt.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ii.forEach(function(r){return qt.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Ii.forEach(function(r){return qt.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),Tn=new qc,Li=function(t){!Dr&&t>0&&Tn.start(),Dr+=t,!Dr&&Tn.stop()},Uc=function(t){return!zn(t)&&!Nc(t)&&getComputedStyle(t).display==="inline"},Kc=function(){function t(e,r){this.target=e,this.observedBox=r||Xt.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=za(this.target,this.observedBox,!0);return Uc(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Wc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}(),xr=new WeakMap,ji=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Er=function(){function t(){}return t.connect=function(e,r){var n=new Wc(e,r);xr.set(e,n)},t.observe=function(e,r,n){var i=xr.get(e),a=i.observationTargets.length===0;ji(i.observationTargets,r)<0&&(a&&Xe.push(i),i.observationTargets.push(new Kc(r,n&&n.box)),Li(1),Tn.schedule())},t.unobserve=function(e,r){var n=xr.get(e),i=ji(n.observationTargets,r),a=n.observationTargets.length===1;i>=0&&(a&&Xe.splice(Xe.indexOf(n),1),n.observationTargets.splice(i,1),Li(-1))},t.disconnect=function(e){var r=this,n=xr.get(e);n.observationTargets.slice().forEach(function(i){return r.unobserve(e,i.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}(),Zc=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Er.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ri(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Er.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ri(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Er.unobserve(this,e)},t.prototype.disconnect=function(){Er.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function me(){return me=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},me.apply(this,arguments)}function Ir(t,e){if(t==null)return{};var r,n,i={},a=Object.keys(t);for(n=0;n<a.length;n++)e.indexOf(r=a[n])>=0||(i[r]=t[r]);return i}var Ut=typeof window<"u"?p.useLayoutEffect:p.useEffect;function It(t,e,r){return e=(e=+e)==e?e:0,r=(r=+r)==r?r:0,(t=+t)==t&&(t=(t=t<=r?t:r)>=e?t:e),t}function kr(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var Jc={box:"border-box"};function cn(t,e){var r=e.label,n=e.enabled,i=e.resizeSourceRef,a=p.useState(0),o=a[0],s=a[1];p.useDebugValue(r+": "+o);var c=p.useCallback(function(u){s(u[0].borderBoxSize[0].blockSize),i.current="element"},[i]);return Ut(function(){if(t.current&&n){var u=new Zc(c);return u.observe(t.current,Jc),function(){u.disconnect()}}},[t,c,n]),n?o:0}function ge(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var Mi={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},zi={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},Xc=xs({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:me({},Mi,zi)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:me({},Mi,zi)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:me({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[Es({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var r=e.payload.source;return r===void 0?"custom":r}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ge()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},activate:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},deactivate:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},openSmoothly:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},openImmediately:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},snapSmoothly:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}},closeSmoothly:function(t,e){try{return Promise.resolve(ge()).then(function(){})}catch(r){return Promise.reject(r)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),Yc=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],Qc=["velocity"],ef=["onRest","config"],Ba=Zs.default,tf=Ba.tension,Or=Ba.friction,rf=le.forwardRef(function(t,e){var r=t.children,n=t.sibling,i=t.className,a=t.footer,o=t.header,s=t.open,c=t.initialState,u=t.lastSnapRef,f=t.initialFocusRef,l=t.onDismiss,d=t.maxHeight,h=t.defaultSnap,g=h===void 0?af:h,m=t.snapPoints,k=m===void 0?of:m,w=t.blocking,b=w===void 0||w,S=t.scrollLocking,A=S===void 0||S,R=t.style,y=t.onSpringStart,v=t.onSpringCancel,E=t.onSpringEnd,T=t.reserveScrollBarGap,P=T===void 0?b:T,O=t.expandOnContentDrag,D=O!==void 0&&O,F=Ir(t,Yc),_=function(){var x=p.useState(!1),L=x[0],I=x[1],V=p.useState({}),ae=V[0],q=V[1],Y=p.useCallback(function(Q){return q(function(oe){var j;return me({},oe,((j={})[Q]=!1,j))}),function(){q(function(oe){var j;return me({},oe,((j={})[Q]=!0,j))})}},[]);return p.useEffect(function(){var Q=Object.values(ae);Q.length!==0&&Q.every(Boolean)&&I(!0)},[ae]),{ready:L,registerReady:Y}}(),J=_.ready,be=_.registerReady,ne=p.useRef(!1),W=p.useRef(y),X=p.useRef(v),ce=p.useRef(E);p.useEffect(function(){W.current=y,X.current=v,ce.current=E},[v,y,E]);var ie,$,Me=eu(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),N=Me[0],ke=Me[1],et=p.useRef(null),ve=p.useRef(null),Ee=p.useRef(null),er=p.useRef(null),Fn=p.useRef(null),Vn=p.useRef(null),ze=p.useRef(0),tt=p.useRef(),Jr=p.useRef(!1),Be=(ie=p.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),$=p.useRef(ie==null?void 0:ie.matches),p.useDebugValue($.current?"reduce":"no-preference"),p.useEffect(function(){var x=function(L){$.current=L.matches};return ie==null||ie.addListener(x),function(){return ie==null?void 0:ie.removeListener(x)}},[ie]),$),rt=function(x){var L=x.targetRef,I=x.enabled,V=x.reserveScrollBarGap,ae=p.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return p.useDebugValue(I?"Enabled":"Disabled"),p.useEffect(function(){if(!I)return ae.current.deactivate(),void(ae.current={activate:function(){},deactivate:function(){}});var q=L.current,Y=!1;ae.current={activate:function(){Y||(Y=!0,Cc(q,{allowTouchMove:function(Q){return Q.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:V}))},deactivate:function(){Y&&(Y=!1,Rc(q))}}},[I,L,V]),ae}({targetRef:ve,enabled:J&&A,reserveScrollBarGap:P}),nt=function(x){var L=x.targetRef,I=x.enabled,V=p.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return p.useDebugValue(I?"Enabled":"Disabled"),p.useEffect(function(){if(!I)return V.current.deactivate(),void(V.current={activate:function(){},deactivate:function(){}});var ae=L.current,q=!1,Y=[],Q=[];V.current={activate:function(){if(!q){q=!0;var oe=ae.parentNode;document.querySelectorAll("body > *").forEach(function(j){if(j!==oe){var U=j.getAttribute("aria-hidden");U!==null&&U!=="false"||(Y.push(U),Q.push(j),j.setAttribute("aria-hidden","true"))}})}},deactivate:function(){q&&(q=!1,Q.forEach(function(oe,j){var U=Y[j];U===null?oe.removeAttribute("aria-hidden"):oe.setAttribute("aria-hidden",U)}),Y=[],Q=[])}}},[L,I]),V}({targetRef:et,enabled:J&&b}),it=function(x){var L=x.targetRef,I=x.fallbackRef,V=x.initialFocusRef,ae=x.enabled,q=p.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return p.useDebugValue(ae?"Enabled":"Disabled"),p.useEffect(function(){if(!ae)return q.current.deactivate(),void(q.current={activate:function(){},deactivate:function(){}});var Y=I.current,Q=Sc(L.current,{onActivate:void 0,initialFocus:V?function(){return(V==null?void 0:V.current)||Y}:void 0,fallbackFocus:Y,escapeDeactivates:!1,clickOutsideDeactivates:!1}),oe=!1;q.current={activate:function(){try{return oe?Promise.resolve():(oe=!0,Promise.resolve(Q.activate()).then(function(){return Promise.resolve(new Promise(function(j){return setTimeout(function(){return j(void 0)},0)})).then(function(){})}))}catch(j){return Promise.reject(j)}},deactivate:function(){oe&&(oe=!1,Q.deactivate())}}},[ae,I,V,L]),q}({targetRef:et,fallbackRef:Vn,initialFocusRef:f||void 0,enabled:J&&b&&f!==!1}),tr=function(x){var L=x.getSnapPoints,I=x.heightRef,V=x.lastSnapRef,ae=x.ready,q=function(pe){var Ae=pe.contentRef,Ve=pe.controlledMaxHeight,Se=pe.footerEnabled,Ue=pe.footerRef,ot=pe.headerEnabled,Pe=pe.headerRef,Ot=pe.registerReady,ar=pe.resizeSourceRef,$n=p.useMemo(function(){return Ot("contentHeight")},[Ot]),Hn=function(Tt,Un,or){var sr=p.useMemo(function(){return Un("maxHeight")},[Un]),Kn=p.useState(function(){return kr(Tt)||typeof window<"u"?window.innerHeight:0}),Wn=Kn[0],Qr=Kn[1],Zn=Wn>0,ur=p.useRef(0);return p.useDebugValue(Tt?"controlled":"auto"),p.useEffect(function(){Zn&&sr()},[Zn,sr]),Ut(function(){if(Tt)return Qr(kr(Tt)),void(or.current="maxheightprop");var Jn=function(){ur.current||(ur.current=requestAnimationFrame(function(){Qr(window.innerHeight),or.current="window",ur.current=0}))};return window.addEventListener("resize",Jn),Qr(window.innerHeight),or.current="window",sr(),function(){window.removeEventListener("resize",Jn),cancelAnimationFrame(ur.current)}},[Tt,sr,or]),Wn}(Ve,Ot,ar),Xr=cn(Pe,{label:"headerHeight",enabled:ot,resizeSourceRef:ar}),Gn=cn(Ae,{label:"contentHeight",enabled:!0,resizeSourceRef:ar}),Yr=cn(Ue,{label:"footerHeight",enabled:Se,resizeSourceRef:ar}),_n=Math.min(Hn-Xr-Yr,Gn)+Xr+Yr;p.useDebugValue("minHeight: "+_n);var qn=Gn>0;return p.useEffect(function(){qn&&$n()},[qn,$n]),{maxHeight:Hn,minHeight:_n,headerHeight:Xr,footerHeight:Yr}}({contentRef:x.contentRef,controlledMaxHeight:x.controlledMaxHeight,footerEnabled:x.footerEnabled,footerRef:x.footerRef,headerEnabled:x.headerEnabled,headerRef:x.headerRef,registerReady:x.registerReady,resizeSourceRef:x.resizeSourceRef}),Y=q.maxHeight,Q=q.minHeight,oe=q.headerHeight,j=q.footerHeight,U=function(pe,Ae){var Ve=[].concat(pe).map(kr).reduce(function(Pe,Ot){return Pe.add(It(Ot,0,Ae)),Pe},new Set),Se=Array.from(Ve),Ue=Math.min.apply(Math,Se);if(Number.isNaN(Ue))throw new TypeError("minSnap is NaN");var ot=Math.max.apply(Math,Se);if(Number.isNaN(ot))throw new TypeError("maxSnap is NaN");return{snapPoints:Se,minSnap:Ue,maxSnap:ot}}(ae?L({height:I.current,footerHeight:j,headerHeight:oe,minHeight:Q,maxHeight:Y}):[0],Y),Te=U.snapPoints,at=U.minSnap,Re=U.maxSnap;return p.useDebugValue("minSnap: "+at+", maxSnap:"+Re),{minSnap:at,maxSnap:Re,findSnap:function(pe){var Ae=kr(typeof pe=="function"?pe({footerHeight:j,headerHeight:oe,height:I.current,minHeight:Q,maxHeight:Y,snapPoints:Te,lastSnap:V.current}):pe);return Te.reduce(function(Ve,Se){return Math.abs(Se-Ae)<Math.abs(Ve-Ae)?Se:Ve},at)},maxHeight:Y}}({contentRef:Ee,controlledMaxHeight:d,footerEnabled:!!a,footerRef:Fn,getSnapPoints:k,headerEnabled:o!==!1,headerRef:er,heightRef:ze,lastSnapRef:u,ready:J,registerReady:be,resizeSourceRef:tt}),xt=tr.minSnap,Et=tr.maxSnap,kt=tr.maxHeight,rr=tr.findSnap,Fe=p.useRef(kt),Oe=p.useRef(xt),de=p.useRef(Et),nr=p.useRef(rr),Le=p.useRef(0);Ut(function(){Fe.current=kt,de.current=Et,Oe.current=xt,nr.current=rr,Le.current=rr(g)},[rr,g,kt,Et,xt]);var we=p.useCallback(function(x){var L=x.onRest,I=x.config,V=(I=I===void 0?{}:I).velocity,ae=V===void 0?1:V,q=Ir(I,Qc),Y=Ir(x,ef);return new Promise(function(Q){return ke(me({},Y,{config:me({velocity:ae},q,{mass:1,tension:tf,friction:Math.max(Or,Or+(Or-Or*ae))}),onRest:function(){var oe=[].slice.call(arguments);Q.apply(void 0,oe),L==null||L.apply(void 0,oe)}}))})},[ke]),Bn=Is(Xc,{devTools:!1,actions:{onOpenCancel:p.useCallback(function(){return X.current==null?void 0:X.current({type:"OPEN"})},[]),onSnapCancel:p.useCallback(function(x){return X.current==null?void 0:X.current({type:"SNAP",source:x.snapSource})},[]),onCloseCancel:p.useCallback(function(){return X.current==null?void 0:X.current({type:"CLOSE"})},[]),onResizeCancel:p.useCallback(function(){return X.current==null?void 0:X.current({type:"RESIZE",source:tt.current})},[]),onOpenEnd:p.useCallback(function(){return ce.current==null?void 0:ce.current({type:"OPEN"})},[]),onSnapEnd:p.useCallback(function(x,L){return ce.current==null?void 0:ce.current({type:"SNAP",source:x.snapSource})},[]),onResizeEnd:p.useCallback(function(){return ce.current==null?void 0:ce.current({type:"RESIZE",source:tt.current})},[])},context:{initialState:c},services:{onSnapStart:p.useCallback(function(x,L){try{return Promise.resolve(W.current==null?void 0:W.current({type:"SNAP",source:L.payload.source||"custom"}))}catch(I){return Promise.reject(I)}},[]),onOpenStart:p.useCallback(function(){try{return Promise.resolve(W.current==null?void 0:W.current({type:"OPEN"}))}catch(x){return Promise.reject(x)}},[]),onCloseStart:p.useCallback(function(){try{return Promise.resolve(W.current==null?void 0:W.current({type:"CLOSE"}))}catch(x){return Promise.reject(x)}},[]),onResizeStart:p.useCallback(function(){try{return Promise.resolve(W.current==null?void 0:W.current({type:"RESIZE",source:tt.current}))}catch(x){return Promise.reject(x)}},[]),onSnapEnd:p.useCallback(function(x,L){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"SNAP",source:x.snapSource}))}catch(I){return Promise.reject(I)}},[]),onOpenEnd:p.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"OPEN"}))}catch(x){return Promise.reject(x)}},[]),onCloseEnd:p.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"CLOSE"}))}catch(x){return Promise.reject(x)}},[]),onResizeEnd:p.useCallback(function(){try{return Promise.resolve(ce.current==null?void 0:ce.current({type:"RESIZE",source:tt.current}))}catch(x){return Promise.reject(x)}},[]),renderVisuallyHidden:p.useCallback(function(x,L){try{return Promise.resolve(we({y:Le.current,ready:0,maxHeight:Fe.current,maxSnap:de.current,minSnap:Le.current,immediate:!0})).then(function(){})}catch(I){return Promise.reject(I)}},[we]),activate:p.useCallback(function(x,L){try{return ne.current=!0,Promise.resolve(Promise.all([rt.current.activate(),it.current.activate(),nt.current.activate()])).then(function(){})}catch(I){return Promise.reject(I)}},[nt,it,rt]),deactivate:p.useCallback(function(){try{return rt.current.deactivate(),it.current.deactivate(),nt.current.deactivate(),ne.current=!1,Promise.resolve()}catch(x){return Promise.reject(x)}},[nt,it,rt]),openImmediately:p.useCallback(function(){try{return ze.current=Le.current,Promise.resolve(we({y:Le.current,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Le.current,immediate:!0})).then(function(){})}catch(x){return Promise.reject(x)}},[we]),openSmoothly:p.useCallback(function(){try{return Promise.resolve(we({y:0,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Le.current,immediate:!0})).then(function(){return ze.current=Le.current,Promise.resolve(we({y:Le.current,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Le.current,immediate:Be.current})).then(function(){})})}catch(x){return Promise.reject(x)}},[we,Be]),snapSmoothly:p.useCallback(function(x,L){try{var I=nr.current(x.y);return ze.current=I,u.current=I,Promise.resolve(we({y:I,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Oe.current,immediate:Be.current,config:{velocity:x.velocity}})).then(function(){})}catch(V){return Promise.reject(V)}},[we,u,Be]),resizeSmoothly:p.useCallback(function(){try{var x=nr.current(ze.current);return ze.current=x,u.current=x,Promise.resolve(we({y:x,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Oe.current,immediate:tt.current!=="element"||Be.current})).then(function(){})}catch(L){return Promise.reject(L)}},[we,u,Be]),closeSmoothly:p.useCallback(function(x,L){try{return we({minSnap:ze.current,immediate:!0}),ze.current=0,Promise.resolve(we({y:0,maxHeight:Fe.current,maxSnap:de.current,immediate:Be.current})).then(function(){return Promise.resolve(we({ready:0,immediate:!0})).then(function(){})})}catch(I){return Promise.reject(I)}},[we,Be])}}),$a=Bn[0],$e=Bn[1];p.useEffect(function(){J&&$e(s?"OPEN":"CLOSE")},[s,$e,J]),Ut(function(){(kt||Et||xt)&&$e("RESIZE")},[kt,Et,xt,$e]),p.useEffect(function(){return function(){rt.current.deactivate(),it.current.deactivate(),nt.current.deactivate()}},[nt,it,rt]),p.useImperativeHandle(e,function(){return{snapTo:function(x,L){var I=L===void 0?{}:L,V=I.velocity,ae=V===void 0?1:V,q=I.source,Y=q===void 0?"custom":q;$e("SNAP",{payload:{y:nr.current(x),velocity:ae,source:Y}})},get height(){return ze.current}}},[$e]),p.useEffect(function(){var x=ve.current,L=function(V){Jr.current&&V.preventDefault()},I=function(V){x.scrollTop<0&&(requestAnimationFrame(function(){x.style.overflow="hidden",x.scrollTop=0,x.style.removeProperty("overflow")}),V.preventDefault())};return D&&(x.addEventListener("scroll",L),x.addEventListener("touchmove",L),x.addEventListener("touchstart",I)),function(){x.removeEventListener("scroll",L),x.removeEventListener("touchmove",L),x.removeEventListener("touchstart",I)}},[D,ve]);var ir=rc(function(x){var L=x.args,I=(L=L===void 0?[]:L)[0],V=(I=I===void 0?{}:I).closeOnTap,ae=V!==void 0&&V,q=I.isContentDragging,Y=q!==void 0&&q,Q=x.cancel,oe=x.direction[1],j=x.down,U=x.first,Te=x.last,at=x.memo,Re=at===void 0?N.y.getValue():at,pe=x.tap,Ae=x.velocity,Ve=-1*x.movement[1];if(!ne.current)return Q(),Re;if(l&&ae&&pe)return Q(),setTimeout(function(){return l()},0),Re;if(pe)return Re;var Se=Re+Ve,Ue=Ve*Ae,ot=Math.max(Oe.current,Math.min(de.current,Se+2*Ue));if(!j&&l&&oe>0&&Se+Ue<Oe.current/2)return Q(),l(),Re;var Pe=j?l||Oe.current!==de.current?Ht(Se,l?0:Oe.current,de.current,.55):Se<Oe.current?Ht(Se,Oe.current,2*de.current,.55):Ht(Se,Oe.current/2,de.current,.55):ot;return D&&Y?(Pe>=de.current&&(Pe=de.current),Re===de.current&&ve.current.scrollTop>0&&(Pe=de.current),Jr.current=Pe<de.current):Jr.current=!1,U&&$e("DRAG"),Te?($e("SNAP",{payload:{y:Pe,velocity:Ae>.05?Ae:1,source:"dragging"}}),Re):(ke({y:Pe,ready:1,maxHeight:Fe.current,maxSnap:de.current,minSnap:Oe.current,immediate:!0,config:{velocity:Ae}}),Re)},{filterTaps:!0});if(Number.isNaN(de.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Oe.current))throw new TypeError("minSnapRef is NaN!!");var Ha=function(x){var L,I=x.spring,V=lt([I.y,I.maxHeight],function(j,U){return Math.round(It(U-j,0,16))+"px"}),ae=lt([I.y,I.minSnap,I.maxSnap],function(j,U,Te){return It(j,U,Te)+"px"}),q=lt([I.y,I.minSnap,I.maxSnap],function(j,U,Te){return j<U?U-j+"px":j>Te?Te-j+"px":"0px"}),Y=lt([I.y,I.maxSnap],function(j,U){return j>=U?Math.ceil(j-U):0}),Q=lt([I.y,I.minSnap],function(j,U){if(!U)return 0;var Te=Math.max(U/2-45,0);return It((j-Te)*(1/(Math.min(U/2+45,U)-Te)+0),0,1)}),oe=lt([I.y,I.minSnap],function(j,U){return U?It(j/U,0,1):0});return(L={})["--rsbs-content-opacity"]=Q,L["--rsbs-backdrop-opacity"]=oe,L["--rsbs-antigap-scale-y"]=Y,L["--rsbs-overlay-translate-y"]=q,L["--rsbs-overlay-rounded"]=V,L["--rsbs-overlay-h"]=ae,L}({spring:N});return le.createElement(bu.div,me({},F,{"data-rsbs-root":!0,"data-rsbs-state":nf.find($a.matches),"data-rsbs-is-blocking":b,"data-rsbs-is-dismissable":!!l,"data-rsbs-has-header":!!o,"data-rsbs-has-footer":!!a,className:i,ref:et,style:me({},Ha,R,{opacity:N.ready})}),n,b&&le.createElement("div",me({key:"backdrop","data-rsbs-backdrop":!0},ir({closeOnTap:!0}))),le.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Vn,onKeyDown:function(x){x.key==="Escape"&&(x.stopPropagation(),l&&l())}},o!==!1&&le.createElement("div",me({key:"header","data-rsbs-header":!0,ref:er},ir()),o),le.createElement("div",me({key:"scroll","data-rsbs-scroll":!0,ref:ve},D?ir({isContentDragging:!0}):{}),le.createElement("div",{"data-rsbs-content":!0,ref:Ee},r)),a&&le.createElement("div",me({key:"footer",ref:Fn,"data-rsbs-footer":!0},ir()),a)))}),nf=["closed","opening","open","closing","dragging","snapping","resizing"];function af(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function of(t){return t.minHeight}var sf=["onSpringStart","onSpringEnd","skipInitialTransition"],uf=p.forwardRef(function(t,e){var r=t.onSpringStart,n=t.onSpringEnd,i=t.skipInitialTransition,a=Ir(t,sf),o=p.useState(!1),s=o[0],c=o[1],u=p.useRef(),f=p.useRef(null),l=p.useRef(i&&a.open?"OPEN":"CLOSED");Ut(function(){if(a.open)return cancelAnimationFrame(u.current),c(!0),function(){l.current="CLOSED"}},[a.open]);var d=p.useCallback(function(g){return Promise.resolve(r==null?void 0:r(g)).then(function(){g.type==="OPEN"&&cancelAnimationFrame(u.current)})},[r]),h=p.useCallback(function(g){return Promise.resolve(n==null?void 0:n(g)).then(function(){g.type==="CLOSE"&&(u.current=requestAnimationFrame(function(){return c(!1)}))})},[n]);return s?le.createElement(Co,{"data-rsbs-portal":!0},le.createElement(rf,me({},a,{lastSnapRef:f,ref:e,initialState:l.current,onSpringStart:d,onSpringEnd:h}))):null});function cf({children:t,navigateToRestaurant:e,restarauntId:r}){const n=Nr(s=>s.isOpen),i=Nr(s=>s.setOpenBottomSheet),a=p.useRef(null),o=s=>{s.type==="SNAP"&&e(r)};return ue.jsx(uf,{ref:a,open:n,snapPoints:()=>[370,844],onDismiss:()=>{i(!1)},onSpringStart:o,style:{"--rsbs-backdrop-bg":"transparent","--rsbs-handle-bg":"rgba(255, 135, 0, 0.8)",zIndex:1e3,position:"fixed"},children:t})}const Rf=()=>{const t=Ka(),[e,r]=p.useState(1),[n,i]=p.useState(""),a=Nr(s=>s.setOpenBottomSheet),o=s=>{t(`/restaurant/${s}`),a(!1)};return ue.jsxs("div",{className:Fi.container,children:[ue.jsx(Ja,{icon:"MagnifyingGlassIcon",placeholder:"식당을 탐색해보세요",readOnly:!0,className:Fi.input,onClick:()=>t("/search")}),ue.jsx(Eo,{activeLabel:n,setActiveLabel:i}),ue.jsx(So,{setRestarauntId:r,activeLabel:n}),ue.jsx(cf,{restarauntId:e,navigateToRestaurant:o,children:ue.jsx(Za,{restarauntId:e})})]})},Fi={container:Kt({position:"relative",width:"100%-60px",height:"100%"}),input:Kt({position:"fixed",marginLeft:30,marginTop:30,zIndex:700,cursor:"pointer","& input":{cursor:"pointer"}})};export{Rf as default};
