import{j as e,c as t,m as g,u as f,r as u}from "./index-DXBLHHrj.js";import{b as h}from "./restaurantReview.query-Cud5js41.js";import{I as v}from "./Icon-CjOVr4Uv.js";import"./index-CfgCCQ2r.js";import"./index-yo3Ex1nr.js";import"./auth.store-BubyNNlM.js";import"./react-B2qnJnne.js";import"./api-path-DDJkiDth.js";import"./index-BQ5kH6Ft.js";const w= i=>{const{data:a,error:n,fetchNextPage:c,hasNextPage:l,isFetching:o,isFetchingNextPage:r,status:p}=h(i);return{reviews:a?a.pages.flatMap(d=>d.reviews):[],fetchNextPage:c,hasNextPage:l,isFetching:o,isFetchingNextPage:r,status:p,error:n}},N=({nickname:i,profileIcon:a,content:n})=>e.jsxs("div",{className:x.wrapper,children:[e.jsxs("div",{className:x.userWrapper,children:[e.jsx("img",{src:a,alt:"프로필 이미지",className:x.userImg}),e.jsx("div",{className:t({textStyle:"body1",display:"flex",alignItems:"center"}),children:i})]}),e.jsx("div",{className:t({textStyle:"body3",whiteSpace:"pre-wrap"}),children:n})]}),x={wrapper:t({width:"100%",display:"flex",flexDirection:"column",gap:"8px",padding:"10px",borderBottom:"1px solid #eee"}),userWrapper:t({display:"flex",gap:"8px",alignItems:"center"}),userImg:t({width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"})},T=()=>{const i=g(),a=f(),{reviews:n,fetchNextPage:c,hasNextPage:l,isFetchingNextPage:o}=w(i),r=u.useRef(null),p=()=>{console.log("아이콘 눌림"),a(`/review?targetId=${i}`)};return u.useEffect(()=>{if(!l||o)return;const s=new IntersectionObserver(d=>{d[0].isIntersecting&&c()},{threshold:1});return r.current&&s.observe(r.current),()=>{r.current&&s.unobserve(r.current)}},[c,l,o]),e.jsxs("div",{className:m.container,children:[e.jsxs("div",{className:m.reviewContainer,children:[e.jsx("div",{className:t({textStyle:"button1"}),children:"리뷰를 작성해주세요"}),e.jsx(v,{iconName:"PencilSquareIcon",library:"hero-solid",fill:"#ff8700",onClick:p})]}),n.map(s=>e.jsx(N,{nickname:s.nickname,profileIcon:s.profileIcon,content:s.content},s.id)),e.jsx("div",{ref:r,className:m.observerTarget,children:o&&e.jsx("p",{children:"리뷰 로딩중..."})})]})},m={container:t({width:"100%",display:"flex",flexDirection:"column",gap:"10px",padding:"10px 20px",overflowY:"auto"}),reviewContainer:t({height:"70px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"}),observerTarget:t({height:"50px",display:"flex",alignItems:"center",justifyContent:"center"})};export{T as default};
