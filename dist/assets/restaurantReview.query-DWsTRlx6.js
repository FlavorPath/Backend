import{Q as m,u as p,a as d}from"./index-DTlkZk8a.js";import{A as w}from"./api-path-DnyBEyJv.js";import{o as g,s as b,t as x,q as y}from"./index-8zlRE-qI.js";import{u as R}from"./index-Cc4pVggC.js";var N=class extends m{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:g()},t)}getOptimisticResult(e){return e.behavior=g(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var f,P;const{state:r}=e,i=super.createResult(e,t),{isFetching:a,isRefetching:v,isError:o,isRefetchError:l}=i,s=(P=(f=r.fetchMeta)==null?void 0:f.fetchMore)==null?void 0:P.direction,n=o&&s==="forward",c=a&&s==="forward",u=o&&s==="backward",h=a&&s==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:x(t,r.data),hasPreviousPage:b(t,r.data),isFetchNextPageError:n,isFetchingNextPage:c,isFetchPreviousPageError:u,isFetchingPreviousPage:h,isRefetchError:l&&!n&&!u,isRefetching:v&&!c&&!h}}};function F(e,t){return p(e,N)}const M=async e=>{const t=`/user/review/${e}`;return(await d.delete(t,{headers:{Authorization:`Bearer ${localStorage.getItem("auth-token")}`}})).data},Q=async({id:e,cursor:t=0})=>{const r=`${w.restaurant}/${e}/reviews?cursor=${t}`;return(await d.get(r)).data},A=()=>R({mutationFn:M,onSuccess:()=>{y.invalidateQueries({queryKey:["reviews"]})},onError:e=>{console.error("리뷰 삭제 실패:",e)}}),I=e=>F({queryKey:["reviews",e],queryFn:({pageParam:t=0})=>Q({id:e,cursor:t}),getNextPageParam:t=>t.lastCursor||void 0,initialPageParam:0,enabled:!!e});export{A as a,I as b,F as u};
